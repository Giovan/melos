From 6c02d36b5ca01e112e4b8a1a944916d6d93b4d13 Mon Sep 17 00:00:00 2001
From: Caedmon Judd <caedmon@statebuilt.com>
Date: Fri, 21 Oct 2011 14:29:40 -0500
Subject: [PATCH 13/55] Work

---
 app/models/note.rb |    4 +++-
 1 files changed, 3 insertions(+), 1 deletions(-)

diff --git a/app/models/note.rb b/app/models/note.rb
index 84b2f93..e217d98 100644
--- a/app/models/note.rb
+++ b/app/models/note.rb
@@ -49,6 +49,7 @@ class Note
       @errors = errors.map { |e| e["error"] }
       return false
     end
+debugger    
     response
   end
   
@@ -58,7 +59,8 @@ class Note
   
   def save
     @token = Digest::MD5.hexdigest "#{auth.username}.Yv6-#{auth.password}"
-
+    @content = '<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE yv-note SYSTEM "http://' << Cfg.api_root << '/pub/yvml_1_0.dtd"><yv-note>' << @content << '</yv-note>'
+        
     response = YvApi.post('notes/create', attributes(:title, :content, :language_iso, :reference, :version,
         :published, :user_status, :shared_connections, :token, :auth)) do |errors|
       @errors = errors.map { |e| e["error"] }      
-- 
1.7.0.4

