
- if @user and @user.invalid?
  = render partial: "shared/form_errors", locals: {errors: @user.errors}

= form_tag sign_in_path(source: params[:source], redirect: params[:redirect]) do
  %p
    = label_tag :username, t("username or email prompt")
    %br
    = text_field_tag :username, params[:username] || cookies.signed[:b], {class: "autofocus"}
  %p
    = label_tag :password, t("password prompt")
    %br
    = password_field_tag :password, params[:password], :maxlength=>"32"
    %br
    %span.small= link_to t('users.forgot password'), forgot_password_path
  %p
    = button_tag t("sign in"), class: "action_button_green"