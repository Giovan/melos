!!! Strict
%html{:xmlns => "http://www.w3.org/1999/xhtml", class: (@html_classes.join(' ') if @html_classes), "data-locale" => I18n.locale, "data-default-locale" => I18n.default_locale, id: @html_id, "data-logged-in" => logged_in?.to_s, "data-user-id" => logged_in? ? current_auth.user_id : nil, "data-user-name" => logged_in? ? current_auth.username : nil, "data-user-avatar" => logged_in? ? current_user.user_avatar_url["px_48x48"] : nil, "data-app-icon" => asset_path(localized_bible_icon(200)), "dir" => is_rtl? ? 'rtl' : 'ltr', "lang" => I18n.locale }

  %head{lang: I18n.locale}
    %meta{:content => "width=device-width, initial-scale=1.0, maximum-scale=1.0", :name => "viewport"}/
    %meta{:content => "text/html; charset=utf-8", "http-equiv" => "Content-Type"}/
    %title YouVersion Events
    %link{:href => "/assets/features/events/flexslider.css", :rel => "stylesheet", :type => "text/css"}/
    %link{:href => "/assets/features/events/jquery.fullPage.css", :rel => "stylesheet", :type => "text/css"}/
    %link{:href => "/assets/features/events/style.css", :rel => "stylesheet", :type => "text/css"}/
    %link{:href => "/assets/features/events/responsive.css", :rel => "stylesheet", :type => "text/css"}/

    %script{:src => "https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js", :type => "text/javascript"}
    %script{:src => "/assets/features/events/global.js", :type => "text/javascript"}
    %script{:src => "/assets/features/events/attrchange.js", :type => "text/javascript"}
    %script{:src => "/assets/features/events/jquery.fullPage.js", :type => "text/javascript"}
    %script{:src => "/assets/features/events/jquery.lazy.min.js", :type => "text/javascript"}
    %script{:src => "/assets/features/events/jquery.smooth-scroll.js", :type => "text/javascript"}
    %script{:src => "/assets/features/events/retina.min.js", :type => "text/javascript"}

    %script{:src => "https://use.typekit.net/egx8aog.js"}
    :javascript
      try{Typekit.load({ async: true });}catch(e){}
    %script{:src => "/assets/features/events/jquery.lazy.min.js", :type => "text/javascript"}
    :javascript
      $(function() {
          $("img.lazy").Lazy();
      });

    - if params[:action].to_s.eql?("events")
      -#this js is only for the main events page   bible.com/features/events
      :javascript
        $(document).ready(function() {
            $('body').smoothScroll({
                    delegateSelector: '.movedown-btn2'
            });
            $('body').smoothScroll({
                    delegateSelector: '.features-btn'
            });

        });
      :javascript
        $(document).ready(function() {

            $(window).resize(function () {
                //$.fn.fullpage.reBuild();
            });

            $('#fullpage-wrap').fullpage({
                menu: '#myMenu',

                anchors: ['section1', 'section2', 'section3', 'section4', 'section5'],
                normalScrollElements: '#features',
                normalScrollElementTouchThreshold: 10,
                scrollBar: true,
                fitToSection: false,
                autoScrolling: false,

                scrollingSpeed: 900,
                //responsiveHeight: 568,
                continuousVertical: false,
                verticalCentered: false,
                resize: false,


                onLeave: function(index, nextIndex, direction){
                    console.log('leave index: '+index);
                    console.log(direction);
                    console.log(nextIndex);
                    $('body').attr('data-index', index);
                    $('body').attr('data-next', nextIndex);
                    $('body').removeClass('up').removeClass('down');
                    $('body').addClass(direction);
                    if(nextIndex == 1){
                        //$('.iphone-hand').fadeIn(500);
                        //$.fn.fullpage.setFitToSection(true);

                        $('.iphone-hand .iphone-screen').animate({top: '0px'}, 350);

                    }
                    if(nextIndex == 2){
                        //$('.iphone-hand').fadeIn(500);
                        //$.fn.fullpage.setFitToSection(true);

                        if ($(window).width() > 861) {
                           $('.iphone-hand .iphone-screen').animate({top: '-275px'}, 350);
                        }
                        if ($(window).width() < 860) {
                           $('.iphone-hand .iphone-screen').animate({top: '-190px'}, 350);
                        }
                        if ($(window).width() < 413) {
                           $('.iphone-hand .iphone-screen').animate({top: '-173px'}, 350);
                        }


                    }
                    if(nextIndex == 3){
                        //$('.iphone-hand').fadeIn(500);
                        //$.fn.fullpage.setFitToSection(true);


                        if ($(window).width() > 861) {
                           $('.iphone-hand .iphone-screen').animate({top: '-550px'}, 350);
                        }
                        if ($(window).width() < 860) {
                           $('.iphone-hand .iphone-screen').animate({top: '-380px'}, 350);
                        }
                        if ($(window).width() < 413) {
                           $('.iphone-hand .iphone-screen').animate({top: '-346px'}, 350);
                        }

                    }
                    if(nextIndex == 4){
                        //$('.iphone-hand').fadeIn(500);
                        //$.fn.fullpage.setFitToSection(true);

                        if ($(window).width() > 861) {
                           $('.iphone-hand .iphone-screen').animate({top: '-825px'}, 350);
                        }
                        if ($(window).width() < 860) {
                           $('.iphone-hand .iphone-screen').animate({top: '-570px'}, 350);
                        }
                        if ($(window).width() < 413) {
                           $('.iphone-hand .iphone-screen').animate({top: '-519px'}, 350);
                        }

                    }


                     if(nextIndex == 5){

                        //$.fn.fullpage.setFitToSection(false);
                     }

                }, afterResize: function(){

                }
            });
        });


        $(document).on('click', '.movedown-btn', function(){
          $.fn.fullpage.moveSectionDown();
        });
        $(document).on('click', '.moveup-btn', function(){
          $.fn.fullpage.moveSectionUp();
        });




  %body{class: "c_#{params[:controller]} a_#{params[:action]}"}
    = render '/shared/google_analytics'
    = content_for?(:main) ? yield(:main) : yield