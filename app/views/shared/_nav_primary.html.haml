:ruby
  is_bible_url      = controller.controller_name == "references" && controller.action_name == "show"
  is_videos_url     = controller_name == "videos"
  is_bookmarks_url  = controller_name == "bookmarks"
  is_plans_url      = controller_name == "plans" || controller_name == "subscriptions"

  # refactor all of these (pull logic to set nav from controllers, etc)
  is_notes_url      = @nav == :notes

  # quick method to return a class of "highlighted"/" " depending on whether the passed test evaluates to true/false
  highlight = Proc.new {|test| test ? "highlighted" : ""}

#nav_primary{:role => "navigation"}
  %nav
    %ul

      %li#nav_primary_bible{class: highlight.call(is_bible_url) }
        %a.icon{:href => '/bible'}
          %span &nbsp;
        %a.tooltip{href: "/bible", style: "display: none;"}
          %span= t('bible')

      %li#nav_primary_plans{class: highlight.call(is_plans_url)}
        %a.icon{:href => current_auth ? user_subscriptions_path(current_auth.username) : plans_path}
          %span &nbsp;
        %a.tooltip{:href => current_auth ? user_subscriptions_path(current_auth.username) : plans_path, style: "display: none;"}
          %span=t("plans.title")

      - if Video.available_locales.include? I18n.locale
        %li#nav_primary_videos{class: highlight.call(is_videos_url)}
          %a.icon{:href => "/videos"}
            %span &nbsp;
          %a.tooltip{:href => "/videos", style: "display: none;"}
            %span=t("videos")

      %li#nav_primary_bookmarks{class: highlight.call(is_bookmarks_url)}
        %a.icon{:href => current_auth ? user_bookmarks_path(current_auth.username) : sign_up_path(source: "bookmark", redirect: "/bookmarks")}
          %span &nbsp;
        %a.tooltip{:href => current_auth ? user_bookmarks_path(current_auth.username) : sign_up_path(source: "bookmark"), style: "display: none;"}
          %span= t('bookmarks.title')

      %li#nav_primary_notes{class: highlight.call(is_notes_url)}
        %a.icon{:href => current_auth ? user_notes_path(current_auth.username) : notes_path}
          %span &nbsp;
        %a.tooltip{:href => current_auth ? user_notes_path(current_auth.username) : notes_path, style: "display: none;"}
          %span=t("notes title")

      %li#nav_primary_live
        %a.icon{:href => "http://#{([:de, :es, :fr, :ko, :nl, :no, :pt, :ru, :zh_CN, :zh_TW].include?(I18n.locale) ? I18n.locale : :www).to_s.downcase.gsub("_", "-")}.a.youversion.com/live"}
          %span &nbsp;
        %a.tooltip{:href => "http://#{([:de, :es, :fr, :ko, :nl, :no, :pt, :ru, :zh_CN, :zh_TW].include?(I18n.locale) ? I18n.locale : :www).to_s.downcase.gsub("_", "-")}.a.youversion.com/live", style: "display: none;"}
          %span=t("live")

      %li#nav_primary_mobile
        %a.icon{:href => '/mobile'}
          %span &nbsp;
        %a.tooltip{:href => '/mobile', style: "display: none;"}
          %span=t("mobile")
