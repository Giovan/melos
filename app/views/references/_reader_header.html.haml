// Local parameters
// version:
// reference:
// alt_version:

.mobile
  %div.verse_toolbar
    %nav{class: ('authed' if current_auth)}
      %a.submenu_btn.highlight_btn{href: 'javascript:void(0);'}
      %a.submenu_btn.bookmark_btn{href: 'javascript:void(0);', "data-action" => new_bookmark_path, "data-method" => 'GET'}
      %a.submenu_btn.note_btn{href: 'javascript:void(0);', "data-action" => new_note_path, "data-method" => 'GET'}
      %a.submenu_btn.share_btn{href: 'javascript:void(0);', "data-action" => new_share_path, "data-method" => 'GET'}

  %div.color_toolbar
    %nav
      %form.highlights{action: (current_auth ? highlights_path : sign_up_path), method: (current_auth ? "POST" : "GET")}
        - if current_auth.nil?
          %input{type: 'hidden', name: 'redirect', value: "/bible"}
          %input{type: 'hidden', name: 'source', value: "highlight"}

        %input.references{name: "highlight[references]", type: "hidden"}
        %input.existing_ids{name: "highlight[existing_ids]", type: "hidden"}

        %div.color_picker_list
          %button.color.color_picker_clear{type:"submit", name: "remove", value: "true", id:"clear_highlights"}
          %span
          - if current_auth
            %span#dup_mobile_highlights
              = render partial: "users/highlight_color_swatches"
          - else
            %span
              = render partial: "users/highlight_color_swatches"
      %div.clear
    .mobile
      %div.close_tab
        %span.first
        %div.mid
          %a.menu_close.highlight_close_btn
        %span.last

.mobile
  %div.nav_items{class: reference.audio ? nil : "audio-disabled"}
    %span.first
    %ul
      %li
        = link_to("Prev", bible_path(reference.previous_chapter), class: "prev") if reference.previous_chapter
      %li
        %a.button.reader_settings_btn{:href => 'javascript:void(0);'}
          %span.icon_reader_settings
      %li{class: ("audio-disabled" unless version.audio_version?)}
        %a.button.audio_btn{:href => '#menu_audio_player', :title => t("ref.listen")}
          %span.icon_listen
          =t("ref.listen")
      %li
        = link_to("Next", bible_path(reference.next_chapter), class: "next") if reference.next_chapter
    %span.last
  %br.clear

#reader_header
  %header
    %ul.float_left
      %li
        %a.dynamic_menu_trigger.drop_down_select{:href => '#menu_book_chapter', id:"menu_book_chapter_trigger", :title => t("ref.choose book and chapter")}
          %b
            = truncate(reference.to_s(version: false), length: 40, separator: " ")
          %span
            = t('ref.choose book and chapter')
      %li
        %a.dynamic_menu_trigger.drop_down_select{href:"#menu_version", id:"menu_version_trigger", title: t("ref.choose version")}
          %b
            = version.human
          %span
            =t("ref.choose version")
    %ul.float_right
      - if alt_version.present?
        %li.show_in_parallel_mode
          %a.dynamic_menu_trigger.drop_down_select{href:"#menu_version", id:"menu_alt_version_trigger", title: t("ref.choose second version")}
            %b
              = alt_version.human
            %span
              =t("ref.choose version")
      %li.hide_in_parallel_mode
        %a.button.dynamic_menu_trigger{href:"#menu_settings", id:"menu_settings_trigger", title:t("ref.settings")}
          %span.icon_settings
            =t("ref.settings")
      %li.hide_in_parallel_mode
        %a.button{:href => reference.audio ? '#menu_audio_player' : nil, :title => reference.audio ? t("ref.listen"): t('audio.none'), class: reference.audio ? "dynamic_menu_trigger" : "disabled"}
          %span.icon_listen{class: reference.audio ? nil : "disabled"}
            =t("ref.listen")
      %li.hide_in_parallel_mode
        %a.button#button_full_screen{:href => '#', :title => t("ref.full screen")}
          %span.icon_full_screen
            =t("ref.full screen")
      %li.float_right_in_parallel_mode
        %a#button_read_parallel.button{:href => '#', :title => t("ref.parallel")}
          %span.icon_parallel
            =t("ref.parallel")
  = render partial: 'shared/menu_verse_actions', locals: {presenter: presenter}
