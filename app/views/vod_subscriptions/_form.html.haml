-# required locals:
-# version_id
-# hour
-# minute
-# meridian
-# type (email/push)
-# versions
-# allowed_hours
-# allowed_minutes

- if !version_id.present? && params[:token].present?
  =t('users.vod_not_subscribed')
-else
  = form_tag vod_subscriptions_path, class: 'vod_form' do
    %h5
      .version
        %p
          = t('notes.version field')
        = hidden_field_tag(:type, type)
        = select_tag(:version_id, options_from_collection_for_select(versions, :id, :to_s, version_id || 1), :disabled => params[:token].present?)

    %h5
      .time
        = "#{t('users.time')}:"
      = select_tag :hour, options_for_select(allowed_hours, hour || "09"), :disabled => params[:token].present?
      = ":"
      = select_tag :minute, options_for_select(allowed_minutes, minute), :disabled => params[:token].present?
      = select_tag :meridian, options_for_select(['AM', 'PM'], meridian), :disabled => params[:token].present?
    - if version_id.present? && !params[:token].present?
      = submit_tag t('bookmarks.update'), class: 'action_button_grey', :disabled => params[:token].present?
    - elsif !params[:token].present?
      = submit_tag t('users.subscribe'), class: 'action_button_green', :disabled => params[:token].present?

- if version_id.present?
  = form_tag vod_subscription_path(type, token: params[:token]), method: :delete, class: 'vod_form_delete' do
    = submit_tag t('users.unsubscribe'), class: 'action_button_dark_grey'