From d618a7ca039d83e0817d552df8483b8d017bc7c4 Mon Sep 17 00:00:00 2001
From: Caedmon Judd <caedmon@statebuilt.com>
Date: Thu, 20 Oct 2011 11:26:44 -0500
Subject: [PATCH 04/55] Notes work

---
 Gemfile                                      |    2 +
 Gemfile.lock                                 |  192 ++++---
 Youversion.komodoproject                     |    4 +
 app/assets/javascripts/notes.js              |    2 +
 app/assets/javascripts/reference.js.coffee   |    1 +
 app/assets/stylesheets/notes.css.scss        |    3 +
 app/controllers/application_controller.rb    |    4 +-
 app/controllers/notes_controller.rb          |   36 ++
 app/helpers/application_helper.rb            |    9 +
 app/helpers/notes_helper.rb                  |   11 +
 app/models/note.rb                           |   71 +++
 app/models/user.rb                           |   16 +-
 app/views/notes/_form.html.haml              |   12 +
 app/views/notes/index.html.haml              |    8 +
 app/views/notes/new.html.haml                |    2 +
 app/views/notes/show.html.haml               |   12 +
 config/routes.rb                             |    2 +
 features/notes.feature                       |   20 +
 features/step_definitions/general_steps.rb   |   19 +
 features/support/paths.rb                    |    6 +-
 fixtures/vcr/cuke/cucumber_tags/bible.yml    |  772 ++++++++++++++++++++++++++
 fixtures/vcr/cuke/cucumber_tags/user.yml     |  112 ++++
 fixtures/vcr/cuke/cucumber_tags/versions.yml |  119 ++++
 lib/yv_api.rb                                |    3 +-
 spec/controllers/notes_controller_spec.rb    |    5 +
 spec/helpers/notes_helper_spec.rb            |   15 +
 26 files changed, 1362 insertions(+), 96 deletions(-)
 create mode 100644 Youversion.komodoproject
 create mode 100644 app/assets/javascripts/notes.js
 create mode 100644 app/assets/stylesheets/notes.css.scss
 create mode 100644 app/controllers/notes_controller.rb
 create mode 100644 app/helpers/notes_helper.rb
 create mode 100644 app/models/note.rb
 create mode 100644 app/views/notes/_form.html.haml
 create mode 100644 app/views/notes/index.html.haml
 create mode 100644 app/views/notes/new.html.haml
 create mode 100644 app/views/notes/show.html.haml
 create mode 100644 features/notes.feature
 create mode 100644 features/step_definitions/general_steps.rb
 create mode 100644 spec/controllers/notes_controller_spec.rb
 create mode 100644 spec/helpers/notes_helper_spec.rb

diff --git a/Gemfile b/Gemfile
index e892d72..46bbae8 100644
--- a/Gemfile
+++ b/Gemfile
@@ -7,6 +7,7 @@ gem 'hashie'
 gem 'cells'
 gem 'haml-rails', "  ~> 0.3.4"
 gem 'jquery-rails'
+gem 'coffee-script'
 
 # Bundle edge Rails instead:
 # gem 'rails',     :git => 'git://github.com/rails/rails.git'
@@ -54,4 +55,5 @@ end
 
 group :development do
   gem 'pry'
+  gem 'ruby-debug19', :require => 'ruby-debug'
 end
diff --git a/Gemfile.lock b/Gemfile.lock
index 1c0f491..e2c4057 100644
--- a/Gemfile.lock
+++ b/Gemfile.lock
@@ -1,39 +1,38 @@
 GEM
   remote: http://rubygems.org/
   specs:
-    actionmailer (3.1.0)
-      actionpack (= 3.1.0)
+    actionmailer (3.1.1)
+      actionpack (= 3.1.1)
       mail (~> 2.3.0)
-    actionpack (3.1.0)
-      activemodel (= 3.1.0)
-      activesupport (= 3.1.0)
+    actionpack (3.1.1)
+      activemodel (= 3.1.1)
+      activesupport (= 3.1.1)
       builder (~> 3.0.0)
       erubis (~> 2.7.0)
       i18n (~> 0.6)
       rack (~> 1.3.2)
-      rack-cache (~> 1.0.3)
+      rack-cache (~> 1.1)
       rack-mount (~> 0.8.2)
       rack-test (~> 0.6.1)
-      sprockets (~> 2.0.0)
-    activemodel (3.1.0)
-      activesupport (= 3.1.0)
-      bcrypt-ruby (~> 3.0.0)
+      sprockets (~> 2.0.2)
+    activemodel (3.1.1)
+      activesupport (= 3.1.1)
       builder (~> 3.0.0)
       i18n (~> 0.6)
-    activerecord (3.1.0)
-      activemodel (= 3.1.0)
-      activesupport (= 3.1.0)
+    activerecord (3.1.1)
+      activemodel (= 3.1.1)
+      activesupport (= 3.1.1)
       arel (~> 2.2.1)
       tzinfo (~> 0.3.29)
-    activeresource (3.1.0)
-      activemodel (= 3.1.0)
-      activesupport (= 3.1.0)
-    activesupport (3.1.0)
+    activeresource (3.1.1)
+      activemodel (= 3.1.1)
+      activesupport (= 3.1.1)
+    activesupport (3.1.1)
       multi_json (~> 1.0)
     addressable (2.2.6)
     ansi (1.3.0)
+    archive-tar-minitar (0.5.2)
     arel (2.2.1)
-    bcrypt-ruby (3.0.0)
     builder (3.0.0)
     capybara (1.0.1)
       mime-types (>= 1.16)
@@ -42,19 +41,24 @@ GEM
       rack-test (>= 0.5.4)
       selenium-webdriver (~> 2.0)
       xpath (~> 0.1.4)
-    cells (3.6.5)
+    cells (3.7.0)
       actionpack (~> 3.0)
       railties (~> 3.0)
     childprocess (0.2.2)
       ffi (~> 1.0.6)
     coderay (0.9.8)
-    crack (0.1.8)
-    cucumber (1.0.2)
+    coffee-script (2.2.0)
+      coffee-script-source
+      execjs
+    coffee-script-source (1.1.2)
+    columnize (0.3.4)
+    crack (0.3.1)
+    cucumber (1.1.0)
       builder (>= 2.1.2)
       diff-lcs (>= 1.1.2)
-      gherkin (~> 2.4.5)
+      gherkin (~> 2.5.0)
       json (>= 1.4.6)
-      term-ansicolor (>= 1.0.5)
+      term-ansicolor (>= 1.0.6)
     cucumber-rails (0.5.2)
       capybara (>= 1.0.0.rc1)
       cucumber (>= 0.10.5)
@@ -62,29 +66,29 @@ GEM
       rack-test (>= 0.5.7)
     diff-lcs (1.1.3)
     erubis (2.7.0)
-    execjs (1.2.4)
+    execjs (1.2.9)
       multi_json (~> 1.0)
-    ffi (1.0.9)
-    gherkin (2.4.16)
+    ffi (1.0.10)
+    gherkin (2.5.4)
       json (>= 1.4.6)
-    guard (0.6.3)
+    guard (0.8.7)
       thor (~> 0.14.6)
     guard-bundler (0.1.3)
       bundler (>= 1.0.0)
       guard (>= 0.2.2)
-    guard-cucumber (0.6.2)
+    guard-cucumber (0.7.3)
       cucumber (>= 0.10)
-      guard (>= 0.4.0)
-    guard-rspec (0.4.4)
-      guard (>= 0.4.0)
-    haml (3.1.2)
+      guard (>= 0.8.3)
+    guard-rspec (0.5.0)
+      guard (>= 0.8.4)
+    haml (3.1.3)
     haml-rails (0.3.4)
       actionpack (~> 3.0)
       activesupport (~> 3.0)
       haml (~> 3.0)
       railties (~> 3.0)
-    hashie (1.1.0)
-    heroku (2.7.0)
+    hashie (1.2.0)
+    heroku (2.9.0)
       launchy (>= 0.3.2)
       rest-client (~> 1.6.1)
       rubyzip
@@ -93,35 +97,38 @@ GEM
       heroku (>= 2)
       rails (>= 2)
     hike (1.2.1)
-    httparty (0.7.8)
-      crack (= 0.1.8)
+    httparty (0.8.1)
+      multi_json
+      multi_xml
     i18n (0.6.0)
-    jquery-rails (1.0.13)
+    jquery-rails (1.0.16)
       railties (~> 3.0)
       thor (~> 0.14)
-    json (1.5.4)
-    json_pure (1.5.4)
-      spruz (~> 0.2.8)
+    json (1.6.1)
+    json_pure (1.6.1)
     launchy (2.0.5)
       addressable (~> 2.2.6)
+    linecache19 (0.5.12)
+      ruby_core_source (>= 0.1.4)
     mail (2.3.0)
       i18n (>= 0.4.0)
       mime-types (~> 1.16)
       treetop (~> 1.4.8)
     memcache-client (1.8.5)
-    method_source (0.6.5)
-      ruby_parser (>= 2.0.5)
+    method_source (0.6.6)
+      ruby_parser (~> 2.0.5)
     mime-types (1.16)
     multi_json (1.0.3)
+    multi_xml (0.4.1)
     nokogiri (1.5.0)
     polyglot (0.3.2)
-    pry (0.9.3)
-      coderay (>= 0.9.8)
-      method_source (>= 0.6.0)
-      ruby_parser (>= 2.0.5)
-      slop (~> 1.9.0)
-    rack (1.3.2)
-    rack-cache (1.0.3)
+    pry (0.9.6.2)
+      coderay (~> 0.9.8)
+      method_source (~> 0.6.5)
+      ruby_parser (~> 2.0.5)
+      slop (~> 2.1.0)
+    rack (1.3.5)
+    rack-cache (1.1)
       rack (>= 0.4)
     rack-mount (0.8.3)
       rack (>= 1.0.0)
@@ -129,77 +136,88 @@ GEM
       rack
     rack-test (0.6.1)
       rack (>= 1.0)
-    rails (3.1.0)
-      actionmailer (= 3.1.0)
-      actionpack (= 3.1.0)
-      activerecord (= 3.1.0)
-      activeresource (= 3.1.0)
-      activesupport (= 3.1.0)
+    rails (3.1.1)
+      actionmailer (= 3.1.1)
+      actionpack (= 3.1.1)
+      activerecord (= 3.1.1)
+      activeresource (= 3.1.1)
+      activesupport (= 3.1.1)
       bundler (~> 1.0)
-      railties (= 3.1.0)
-    railties (3.1.0)
-      actionpack (= 3.1.0)
-      activesupport (= 3.1.0)
+      railties (= 3.1.1)
+    railties (3.1.1)
+      actionpack (= 3.1.1)
+      activesupport (= 3.1.1)
       rack-ssl (~> 1.3.2)
       rake (>= 0.8.7)
       rdoc (~> 3.4)
       thor (~> 0.14.6)
     rake (0.9.2)
-    rdoc (3.9.4)
+    rdoc (3.11)
+      json (~> 1.4)
     rest-client (1.6.7)
       mime-types (>= 1.16)
-    rspec (2.6.0)
-      rspec-core (~> 2.6.0)
-      rspec-expectations (~> 2.6.0)
-      rspec-mocks (~> 2.6.0)
-    rspec-cells (0.0.5)
-      cells (~> 3.4)
+    rspec (2.7.0)
+      rspec-core (~> 2.7.0)
+      rspec-expectations (~> 2.7.0)
+      rspec-mocks (~> 2.7.0)
+    rspec-cells (0.1.0)
       rails (~> 3.0)
       rspec-rails (~> 2.2)
-    rspec-core (2.6.4)
-    rspec-expectations (2.6.0)
+    rspec-core (2.7.1)
+    rspec-expectations (2.7.0)
       diff-lcs (~> 1.1.2)
-    rspec-mocks (2.6.0)
-    rspec-rails (2.6.1)
+    rspec-mocks (2.7.0)
+    rspec-rails (2.7.0)
       actionpack (~> 3.0)
       activesupport (~> 3.0)
       railties (~> 3.0)
-      rspec (~> 2.6.0)
-    ruby_parser (2.2.0)
+      rspec (~> 2.7.0)
+    ruby-debug-base19 (0.11.25)
+      columnize (>= 0.3.1)
+      linecache19 (>= 0.5.11)
+      ruby_core_source (>= 0.1.4)
+    ruby-debug19 (0.11.6)
+      columnize (>= 0.3.1)
+      linecache19 (>= 0.5.11)
+      ruby-debug-base19 (>= 0.11.19)
+    ruby_core_source (0.1.5)
+      archive-tar-minitar (>= 0.5.2)
+    ruby_parser (2.0.6)
       sexp_processor (~> 3.0)
     rubyzip (0.9.4)
-    sass (3.1.7)
-    sass-rails (3.1.0)
+    sass (3.1.10)
+    sass-rails (3.1.4)
       actionpack (~> 3.1.0)
       railties (~> 3.1.0)
       sass (>= 3.1.4)
-    selenium-webdriver (2.5.0)
+      sprockets (~> 2.0.0)
+      tilt (~> 1.3.2)
+    selenium-webdriver (2.8.0)
       childprocess (>= 0.2.1)
       ffi (>= 1.0.7)
       json_pure
       rubyzip
-    sexp_processor (3.0.6)
-    slop (1.9.1)
-    sprockets (2.0.0)
+    sexp_processor (3.0.7)
+    slop (2.1.0)
+    sprockets (2.0.3)
       hike (~> 1.2)
       rack (~> 1.0)
       tilt (!= 1.3.0, ~> 1.1)
-    spruz (0.2.13)
-    term-ansicolor (1.0.6)
+    term-ansicolor (1.0.7)
     thor (0.14.6)
     tilt (1.3.3)
     treetop (1.4.10)
       polyglot
       polyglot (>= 0.3.1)
-    turn (0.8.2)
-      ansi (>= 1.2.2)
-    tzinfo (0.3.29)
-    uglifier (1.0.2)
+    turn (0.8.3)
+      ansi
+    tzinfo (0.3.30)
+    uglifier (1.0.4)
       execjs (>= 0.3.0)
       multi_json (>= 1.0.2)
     vcr (1.11.3)
-    webmock (1.7.6)
-      addressable (~> 2.2, > 2.2.5)
+    webmock (1.7.7)
+      addressable (> 2.2.5, ~> 2.2)
       crack (>= 0.1.7)
     xpath (0.1.4)
       nokogiri (~> 1.3)
@@ -210,6 +228,7 @@ PLATFORMS
 DEPENDENCIES
   capybara (~> 1.0.0.beta1)
   cells
+  coffee-script
   cucumber-rails (~> 0.5.0.beta1)
   guard
   guard-bundler
@@ -225,6 +244,7 @@ DEPENDENCIES
   rails (~> 3.1.0)
   rspec-cells
   rspec-rails (>= 2.6.0)
+  ruby-debug19
   sass-rails (~> 3.1.0)
   turn
   uglifier
diff --git a/Youversion.komodoproject b/Youversion.komodoproject
new file mode 100644
index 0000000..2bc6d0e
--- /dev/null
+++ b/Youversion.komodoproject
@@ -0,0 +1,4 @@
+<?xml version="1.0" encoding="UTF-8"?>
+<!-- Komodo Project File - DO NOT EDIT -->
+<project id="7014dc6e-10c1-4291-9959-934610e92636" kpf_version="5" name="Youversion.komodoproject">
+</project>
diff --git a/app/assets/javascripts/notes.js b/app/assets/javascripts/notes.js
new file mode 100644
index 0000000..dee720f
--- /dev/null
+++ b/app/assets/javascripts/notes.js
@@ -0,0 +1,2 @@
+// Place all the behaviors and hooks related to the matching controller here.
+// All this logic will automatically be available in application.js.
diff --git a/app/assets/javascripts/reference.js.coffee b/app/assets/javascripts/reference.js.coffee
index 7615679..4eaf4b1 100644
--- a/app/assets/javascripts/reference.js.coffee
+++ b/app/assets/javascripts/reference.js.coffee
@@ -1,3 +1,4 @@
 # Place all the behaviors and hooks related to the matching controller here.
 # All this logic will automatically be available in application.js.
 # You can use CoffeeScript in this file: http://jashkenas.github.com/coffee-script/
+efesf
\ No newline at end of file
diff --git a/app/assets/stylesheets/notes.css.scss b/app/assets/stylesheets/notes.css.scss
new file mode 100644
index 0000000..56d31f5
--- /dev/null
+++ b/app/assets/stylesheets/notes.css.scss
@@ -0,0 +1,3 @@
+// Place all the styles related to the notes controller here.
+// They will automatically be included in application.css.
+// You can use Sass (SCSS) here: http://sass-lang.com/
diff --git a/app/controllers/application_controller.rb b/app/controllers/application_controller.rb
index c0747a2..4611803 100644
--- a/app/controllers/application_controller.rb
+++ b/app/controllers/application_controller.rb
@@ -11,13 +11,13 @@ class ApplicationController < ActionController::Base
 
   def current_user
     unless @current_user
-      @current_user = User.find(cookies.signed[:a]) if cookies.signed[:a]
+      @current_user = User.find(cookies.signed[:a]) if cookies.signed[:a]      
       @current_user.username = cookies.signed[:b]
       @current_user.password = cookies.signed[:c]
     end
     @current_user
   end
   def current_username
-    cookies.signed[:b] if cookies.signed[:b]
+    User.find(cookies.signed[:a]).username if cookies.signed[:a]      
   end
 end
diff --git a/app/controllers/notes_controller.rb b/app/controllers/notes_controller.rb
new file mode 100644
index 0000000..3753c64
--- /dev/null
+++ b/app/controllers/notes_controller.rb
@@ -0,0 +1,36 @@
+class NotesController < ApplicationController
+  
+  def index
+    @notes = Note.all(current_user)    
+  end
+  
+  def new
+    @note = Note.new()
+  end
+  
+  def show
+    @note = Note.find(params[:id], current_user)
+  end
+  
+  def create
+    @note = Note.new(params)
+    @note.user = current_user 
+
+    if @note.save
+      render action: "show"
+    else
+      flash[:alert] = []
+      @note.errors.each do |error|       
+        flash.now[:alert] << error
+      end
+      render action: "new"
+    end    
+  end
+  
+  def update
+  end
+  
+  def delete
+  end
+  
+end
diff --git a/app/helpers/application_helper.rb b/app/helpers/application_helper.rb
index de6be79..7c1d86f 100644
--- a/app/helpers/application_helper.rb
+++ b/app/helpers/application_helper.rb
@@ -1,2 +1,11 @@
 module ApplicationHelper
+  
+  def object_status   #TODO: More useful name?
+    status = {}
+    status['Public'] = 0
+    status['Private'] = 1
+    status['Draft'] = 2
+    status
+  end
+  
 end
diff --git a/app/helpers/notes_helper.rb b/app/helpers/notes_helper.rb
new file mode 100644
index 0000000..5183a4c
--- /dev/null
+++ b/app/helpers/notes_helper.rb
@@ -0,0 +1,11 @@
+module NotesHelper
+  
+  def versions_dropdown
+    return_versions = {}
+
+    Version.versions.each do |k, v|
+        return_versions[v.title] = k
+    end
+    return_versions.sort
+  end
+end
diff --git a/app/models/note.rb b/app/models/note.rb
new file mode 100644
index 0000000..26e1be8
--- /dev/null
+++ b/app/models/note.rb
@@ -0,0 +1,71 @@
+class Note
+  extend ActiveModel::Naming
+  include ActiveModel::Conversion
+  def persisted?
+    false
+  end
+
+  def attributes(*args)
+    array = args
+    array = self.instance_variables.map { |e| e.to_s.gsub("@", "").to_sym} if array == []
+    attrs = {}
+    array.each do |var|
+      attrs[var] = instance_variable_get("@#{var}")
+    end
+    attrs
+  end
+  
+  attr_reader :errors
+  
+  def initialize(params = {})
+    reg_data = {title: "", content: "", language_iso: "", reference: "", version: "", published: "", user_status: "", share_connections: "", user: nil}    
+    reg_data.merge! params
+    reg_data.each do |k,v|    
+      # Create instance variable
+      self.instance_variable_set("@#{k}", v)
+      # Create the getter
+      self.class.send(:define_method, k, proc{self.instance_variable_get("@#{k}")})
+      # Create the setter
+      self.class.send(:define_method, "#{k}=", proc{|v| self.instance_variable_set("@#{k}", v)})
+    end
+  end
+  
+  def self.find(id, user)
+    response = YvApi.get('notes/view', {:id => id, :user => user} ) do |errors|     
+      @errors = errors.map { |e| e["error"] }
+      return false
+    end
+    Note.new(response)
+  end
+  
+  def find(id, user)
+    self.class.find(id, user)
+  end
+  
+  def self.all(user)
+    response = YvApi.get('notes/items', {:user_id => user.id, :user => user} ) do |errors|     
+      @errors = errors.map { |e| e["error"] }
+      return false
+    end
+
+    #TODO: Complete return
+
+  end
+  
+  def all(user)
+    self.class.all(user)
+  end
+  
+  def save
+    @token = Digest::MD5.hexdigest "#{user.username}.Yv6-#{user.password}"
+    
+    response = YvApi.post('notes/create', attributes(:title, :content, :language_iso, :reference, :version,
+        :published, :user_status, :shared_connections, :token, :user)) do |errors|
+      @errors = errors.map { |e| e["error"] }
+#debugger      
+      return false
+    end
+    response
+  end  
+  
+end
diff --git a/app/models/user.rb b/app/models/user.rb
index f834635..660c2e9 100644
--- a/app/models/user.rb
+++ b/app/models/user.rb
@@ -1,6 +1,5 @@
 require 'digest/md5'
 
-
 class User
   extend ActiveModel::Naming
   include ActiveModel::Conversion
@@ -23,7 +22,7 @@ class User
 
   def initialize(params = {})
     params[:agree] = true if params[:agree]
-    reg_data = {email: "", username: "", password: "", verified: false, agree: false}
+    reg_data = {id: 0, email: "", username: "", password: "", verified: false, agree: false}
     reg_data.merge! params
     reg_data.each do |k,v|
       # Create instance variable
@@ -35,13 +34,20 @@ class User
     end
   end
 
+  def self.find(id)
+    response = YvApi.get('users/view', {:user_id => id, :auth_user_id => :id} ) do |errors|     
+      @errors = errors.map { |e| e["error"] }
+      return false
+    end
+    User.new(response)
+  end
 
   def save
     @token = Digest::MD5.hexdigest "#{@username}.Yv6-#{@password}"
-    response = YvApi.post('users/create', attributes(:email, :username, :password, :verified, :agree, :token)) do |errors|
-      @errors = errors.map { |e| e["error"] }
+    response = YvApi.post('users/create', attributes(:email, :username, :password, :verified, :agree, :token)) do |errors|     
+      @errors = errors.map { |e| e["error"] }     
       return false
-    end
+    end    
     response
   end
 
diff --git a/app/views/notes/_form.html.haml b/app/views/notes/_form.html.haml
new file mode 100644
index 0000000..a17cfa4
--- /dev/null
+++ b/app/views/notes/_form.html.haml
@@ -0,0 +1,12 @@
+= form_tag notes_path do
+  = label_tag :title, "Title:"
+  = text_field_tag :title, params[:title]
+  = label_tag :content, "Content:"
+  = text_field_tag :content, params[:content]
+  = label_tag :version, "Version:"
+  = select_tag :version, options_for_select(versions_dropdown, :version)
+  = label_tag :reference, "Reference:"
+  = text_field_tag :reference, params[:reference]
+  = label_tag :status, "Status:"
+  = select_tag :status, options_for_select(object_status, :status)
+  = submit_tag "Save"
\ No newline at end of file
diff --git a/app/views/notes/index.html.haml b/app/views/notes/index.html.haml
new file mode 100644
index 0000000..820a5a4
--- /dev/null
+++ b/app/views/notes/index.html.haml
@@ -0,0 +1,8 @@
+#note
+  %h1= "Show Note"
+  - @notes.each do |note|
+  %div{id: "title"}= note.title
+  %div{id: "content"}= note.content
+  %div{id: "version"}= note.version
+  %div{id: "reference"}= note.reference
+  %div{id: "status"}= note.status
\ No newline at end of file
diff --git a/app/views/notes/new.html.haml b/app/views/notes/new.html.haml
new file mode 100644
index 0000000..a27382f
--- /dev/null
+++ b/app/views/notes/new.html.haml
@@ -0,0 +1,2 @@
+%h1= "New Note"
+= render 'form'
\ No newline at end of file
diff --git a/app/views/notes/show.html.haml b/app/views/notes/show.html.haml
new file mode 100644
index 0000000..39ab184
--- /dev/null
+++ b/app/views/notes/show.html.haml
@@ -0,0 +1,12 @@
+#note
+  %h1= "Show Note"
+  = label_tag :title, "Title:"
+  = @note.title
+  = label_tag :content, "Content:"
+  = @note.content
+  = label_tag :version, "Version:"
+  = @note.version
+  = label_tag :reference, "Reference:"
+  = @note.reference
+  = label_tag :status, "Status:"
+  = @note.status
diff --git a/config/routes.rb b/config/routes.rb
index db5b0d2..88c74e8 100644
--- a/config/routes.rb
+++ b/config/routes.rb
@@ -2,6 +2,8 @@ YouversionWeb::Application.routes.draw do
   # Bible
   match 'bible(/:reference)' => 'references#show', :as => 'bible', :constraints => {:reference => /.*/}
   resources 'versions', :only => [:index, :show]
+  resources 'notes'
+  
   # Users
   resources 'users', :except => [:new, :create]
   match 'sign-up' => 'users#new',    :as => 'sign_up', :via => :get
diff --git a/features/notes.feature b/features/notes.feature
new file mode 100644
index 0000000..432b52c
--- /dev/null
+++ b/features/notes.feature
@@ -0,0 +1,20 @@
+Feature: Notes view
+  In order to: Create a Note
+  As a:        User
+  I want to:   Create a new note and save it
+
+  @bible
+  Scenario: Create note
+    Given a user named "testuser" with password "tenders" exists
+    And I am logged in as "testuser" with password "tenders" 
+    When I go to the new note page
+    And I fill in "Title" with "Note Title" 
+    And I fill in "Content" with "Note Content" 
+    And I select "King James Version" from the dropdown "version"
+    And I fill in "Reference" with "Genesis 1:1" 
+    And I select "Public" from the dropdown "status"
+    And I click "Save" 
+    Then I should be on a show note page
+    And I should see "Note Title" 
+    And I should see "Note Content" 
+    And I should see a link to "Genesis 1:1 (KJV)" 
\ No newline at end of file
diff --git a/features/step_definitions/general_steps.rb b/features/step_definitions/general_steps.rb
new file mode 100644
index 0000000..70d9253
--- /dev/null
+++ b/features/step_definitions/general_steps.rb
@@ -0,0 +1,19 @@
+Given /^a user named "([^"]*)" with password "([^"]*)" exists$/ do |arg1, arg2|  
+  User.authenticate(arg1, arg2).should_not == nil
+end
+
+Given /^I am logged in as "([^"]*)" with password "([^"]*)"$/ do |arg1, arg2|
+  visit '/sign-in'
+  fill_in "username", :with => arg1
+  fill_in "password", :with => arg2
+  click_button "Sign in"
+  assert page.has_content?('Signed in!')
+end
+
+When /^I select "([^"]*)" from the dropdown "([^"]*)"$/ do |arg1, arg2|
+  select(arg1, :from => arg2)
+end
+
+When /^I click "([^"]*)"$/ do |arg1|
+  click_button "Save"
+end
diff --git a/features/support/paths.rb b/features/support/paths.rb
index 3b0aa04..1e4e67f 100644
--- a/features/support/paths.rb
+++ b/features/support/paths.rb
@@ -18,7 +18,11 @@ module NavigationHelpers
       sign_up_path
     when /^the version page for \"(.*)\"$/
       version_path $1
-
+    when /^new note page$/
+      notes_path
+    when /^a show note page$/
+      notes_path(note: $1)
+      
     # Add more mappings here.
     # Here is an example that pulls values out of the Regexp:
     #
diff --git a/fixtures/vcr/cuke/cucumber_tags/bible.yml b/fixtures/vcr/cuke/cucumber_tags/bible.yml
index ca655f4..596103f 100644
--- a/fixtures/vcr/cuke/cucumber_tags/bible.yml
+++ b/fixtures/vcr/cuke/cucumber_tags/bible.yml
@@ -1261,3 +1261,775 @@
       it was morning-Day Six.<\/span>"}],"audio":null},"previous":"","next":{"reference":{"osis":"Gen.2","human":"Genesis
       2"}}},"buildtime":"2011-10-06T17:28:43+00:00"}],"buildtime":"2011-10-06T17:28:43+00:00"}}'
     http_version: '1.1'
+- !ruby/struct:VCR::HTTPInteraction
+  request: !ruby/struct:VCR::Request
+    method: :get
+    uri: https://testuser:tenders@api.yvdev.com:443/2.3/users/authenticate.json?
+    body: !!null 
+    headers:
+      referer:
+      - https://api.yvdev.com
+  response: !ruby/struct:VCR::Response
+    status: !ruby/struct:VCR::ResponseStatus
+      code: 301
+      message: Moved Permanently
+    headers:
+      server:
+      - nginx/0.7.67
+      date:
+      - Tue, 18 Oct 2011 14:38:54 GMT
+      content-type:
+      - text/html
+      content-length:
+      - '185'
+      connection:
+      - keep-alive
+      location:
+      - http://api.yvdev.com/2.3/users/authenticate.json
+    body: ! "<html>\r\n<head><title>301 Moved Permanently</title></head>\r\n<body
+      bgcolor=\"white\">\r\n<center><h1>301 Moved Permanently</h1></center>\r\n<hr><center>nginx/0.7.67</center>\r\n</body>\r\n</html>\r\n"
+    http_version: '1.1'
+- !ruby/struct:VCR::HTTPInteraction
+  request: !ruby/struct:VCR::Request
+    method: :get
+    uri: http://testuser:tenders@api.yvdev.com:80/2.3/users/authenticate.json
+    body: !!null 
+    headers:
+      referer:
+      - https://api.yvdev.com
+  response: !ruby/struct:VCR::Response
+    status: !ruby/struct:VCR::ResponseStatus
+      code: 200
+      message: OK
+    headers:
+      server:
+      - nginx/0.7.67
+      date:
+      - Tue, 18 Oct 2011 14:38:55 GMT
+      content-type:
+      - text/plain; charset=utf-8
+      transfer-encoding:
+      - chunked
+      connection:
+      - keep-alive
+      vary:
+      - Accept-Encoding
+    body: ! '{"response":{"code":200,"data":{"id":"4163157","username":"testuser","user_avatar_url":{"px_24x24":"http:\/\/avatars.youversion.com\/5d9c68c6c50ed3d02a2fcf54f63993b6_24x24.png","px_48x48":"http:\/\/avatars.youversion.com\/5d9c68c6c50ed3d02a2fcf54f63993b6_48x48.png","px_128x128":"http:\/\/avatars.youversion.com\/5d9c68c6c50ed3d02a2fcf54f63993b6_128x128.png","px_512x512":"http:\/\/avatars.youversion.com\/5d9c68c6c50ed3d02a2fcf54f63993b6_512x512.png"},"name":null,"first_name":null,"last_name":null,"location":null,"im_type":null,"im_value":null,"website":null,"mobile":null,"postal_code":null,"language":"false","country":"  ","timezone":"UTC","created":"2011-10-07
+      15:46:51.607149+00","last_login":"2011-10-18 14:38:55+00","twitter":null,"facebook":null,"email":"testuser@youversion.com","notice_contrib_fav":"true","notice_follower":"true","notice_newsletter":"true","notice_badges":"true","notice_reading_plans":"true"},"buildtime":"2011-10-18T14:38:55+00:00"}}'
+    http_version: '1.1'
+- !ruby/struct:VCR::HTTPInteraction
+  request: !ruby/struct:VCR::Request
+    method: :get
+    uri: https://testuser:tenders1@api.yvdev.com:443/2.3/users/authenticate.json?
+    body: !!null 
+    headers:
+      referer:
+      - https://api.yvdev.com
+  response: !ruby/struct:VCR::Response
+    status: !ruby/struct:VCR::ResponseStatus
+      code: 301
+      message: Moved Permanently
+    headers:
+      server:
+      - nginx/0.7.67
+      date:
+      - Tue, 18 Oct 2011 14:41:48 GMT
+      content-type:
+      - text/html
+      content-length:
+      - '185'
+      connection:
+      - keep-alive
+      location:
+      - http://api.yvdev.com/2.3/users/authenticate.json
+    body: ! "<html>\r\n<head><title>301 Moved Permanently</title></head>\r\n<body
+      bgcolor=\"white\">\r\n<center><h1>301 Moved Permanently</h1></center>\r\n<hr><center>nginx/0.7.67</center>\r\n</body>\r\n</html>\r\n"
+    http_version: '1.1'
+- !ruby/struct:VCR::HTTPInteraction
+  request: !ruby/struct:VCR::Request
+    method: :get
+    uri: http://testuser:tenders1@api.yvdev.com:80/2.3/users/authenticate.json
+    body: !!null 
+    headers:
+      referer:
+      - https://api.yvdev.com
+  response: !ruby/struct:VCR::Response
+    status: !ruby/struct:VCR::ResponseStatus
+      code: 200
+      message: OK
+    headers:
+      server:
+      - nginx/0.7.67
+      date:
+      - Tue, 18 Oct 2011 14:41:48 GMT
+      content-type:
+      - text/plain; charset=utf-8
+      transfer-encoding:
+      - chunked
+      connection:
+      - keep-alive
+      vary:
+      - Accept-Encoding
+    body: ! '{"response":{"code":403,"data":{"errors":[{"key":"users.username_or_password.invalid","error":"Username
+      or password is invalid"}]},"buildtime":"2011-10-18T14:41:48+00:00"}}'
+    http_version: '1.1'
+- !ruby/struct:VCR::HTTPInteraction
+  request: !ruby/struct:VCR::Request
+    method: :get
+    uri: https://api.yvdev.com:443/2.3/users/authenticate.json?auth_password=&auth_username=
+    body: !!null 
+    headers:
+      referer:
+      - https://api.yvdev.com
+  response: !ruby/struct:VCR::Response
+    status: !ruby/struct:VCR::ResponseStatus
+      code: 301
+      message: Moved Permanently
+    headers:
+      server:
+      - nginx/0.7.67
+      date:
+      - Tue, 18 Oct 2011 14:53:03 GMT
+      content-type:
+      - text/html
+      content-length:
+      - '185'
+      connection:
+      - keep-alive
+      location:
+      - http://api.yvdev.com/2.3/users/authenticate.json?auth_username=&auth_password=
+    body: ! "<html>\r\n<head><title>301 Moved Permanently</title></head>\r\n<body
+      bgcolor=\"white\">\r\n<center><h1>301 Moved Permanently</h1></center>\r\n<hr><center>nginx/0.7.67</center>\r\n</body>\r\n</html>\r\n"
+    http_version: '1.1'
+- !ruby/struct:VCR::HTTPInteraction
+  request: !ruby/struct:VCR::Request
+    method: :get
+    uri: http://api.yvdev.com:80/2.3/users/authenticate.json?auth_password=&auth_username=
+    body: !!null 
+    headers:
+      referer:
+      - https://api.yvdev.com
+  response: !ruby/struct:VCR::Response
+    status: !ruby/struct:VCR::ResponseStatus
+      code: 401
+      message: Unauthorized
+    headers:
+      server:
+      - nginx/0.7.67
+      date:
+      - Tue, 18 Oct 2011 14:53:03 GMT
+      content-type:
+      - text/plain; charset=utf-8
+      transfer-encoding:
+      - chunked
+      connection:
+      - keep-alive
+      www-authenticate:
+      - Basic realm="api.yvdev.com"
+    body: ! '{"response":{"code":400,"data":{"errors":[{"key":"users.username_and_password.required","error":"Username
+      and password are required"}]},"buildtime":"2011-10-18T14:53:03+00:00"}}'
+    http_version: '1.1'
+- !ruby/struct:VCR::HTTPInteraction
+  request: !ruby/struct:VCR::Request
+    method: :get
+    uri: https://api.yvdev.com:443/2.3/users/authenticate.json?auth_password=tenders&auth_username=
+    body: !!null 
+    headers:
+      referer:
+      - https://api.yvdev.com
+  response: !ruby/struct:VCR::Response
+    status: !ruby/struct:VCR::ResponseStatus
+      code: 301
+      message: Moved Permanently
+    headers:
+      server:
+      - nginx/0.7.67
+      date:
+      - Tue, 18 Oct 2011 14:57:06 GMT
+      content-type:
+      - text/html
+      content-length:
+      - '185'
+      connection:
+      - keep-alive
+      location:
+      - http://api.yvdev.com/2.3/users/authenticate.json?auth_username=&auth_password=tenders
+    body: ! "<html>\r\n<head><title>301 Moved Permanently</title></head>\r\n<body
+      bgcolor=\"white\">\r\n<center><h1>301 Moved Permanently</h1></center>\r\n<hr><center>nginx/0.7.67</center>\r\n</body>\r\n</html>\r\n"
+    http_version: '1.1'
+- !ruby/struct:VCR::HTTPInteraction
+  request: !ruby/struct:VCR::Request
+    method: :get
+    uri: http://api.yvdev.com:80/2.3/users/authenticate.json?auth_password=tenders&auth_username=
+    body: !!null 
+    headers:
+      referer:
+      - https://api.yvdev.com
+  response: !ruby/struct:VCR::Response
+    status: !ruby/struct:VCR::ResponseStatus
+      code: 401
+      message: Unauthorized
+    headers:
+      server:
+      - nginx/0.7.67
+      date:
+      - Tue, 18 Oct 2011 14:57:06 GMT
+      content-type:
+      - text/plain; charset=utf-8
+      transfer-encoding:
+      - chunked
+      connection:
+      - keep-alive
+      www-authenticate:
+      - Basic realm="api.yvdev.com"
+    body: ! '{"response":{"code":400,"data":{"errors":[{"key":"users.username_and_password.required","error":"Username
+      and password are required"}]},"buildtime":"2011-10-18T14:57:06+00:00"}}'
+    http_version: '1.1'
+- !ruby/struct:VCR::HTTPInteraction
+  request: !ruby/struct:VCR::Request
+    method: :get
+    uri: https://api.yvdev.com:443/2.3/users/view.json?auth_user_id=id&user_id=4163157
+    body: !!null 
+    headers:
+      referer:
+      - https://api.yvdev.com
+  response: !ruby/struct:VCR::Response
+    status: !ruby/struct:VCR::ResponseStatus
+      code: 301
+      message: Moved Permanently
+    headers:
+      server:
+      - nginx/0.7.67
+      date:
+      - Thu, 20 Oct 2011 13:54:05 GMT
+      content-type:
+      - text/html
+      content-length:
+      - '185'
+      connection:
+      - keep-alive
+      location:
+      - http://api.yvdev.com/2.3/users/view.json?user_id=4163157&auth_user_id=id
+    body: ! "<html>\r\n<head><title>301 Moved Permanently</title></head>\r\n<body
+      bgcolor=\"white\">\r\n<center><h1>301 Moved Permanently</h1></center>\r\n<hr><center>nginx/0.7.67</center>\r\n</body>\r\n</html>\r\n"
+    http_version: '1.1'
+- !ruby/struct:VCR::HTTPInteraction
+  request: !ruby/struct:VCR::Request
+    method: :get
+    uri: http://api.yvdev.com:80/2.3/users/view.json?auth_user_id=id&user_id=4163157
+    body: !!null 
+    headers:
+      referer:
+      - https://api.yvdev.com
+  response: !ruby/struct:VCR::Response
+    status: !ruby/struct:VCR::ResponseStatus
+      code: 200
+      message: OK
+    headers:
+      server:
+      - nginx/0.7.67
+      date:
+      - Thu, 20 Oct 2011 13:54:05 GMT
+      content-type:
+      - text/plain; charset=utf-8
+      transfer-encoding:
+      - chunked
+      connection:
+      - keep-alive
+      vary:
+      - Accept-Encoding
+    body: ! '{"response":{"code":404,"data":{"errors":[{"key":"users.user.not_found","error":"No
+      user with this username\/email address"}]},"buildtime":"2011-10-20T13:54:05+00:00"}}'
+    http_version: '1.1'
+- !ruby/struct:VCR::HTTPInteraction
+  request: !ruby/struct:VCR::Request
+    method: :get
+    uri: https://api.yvdev.com:443/2.3/bible/chapter.json?format=html&reference=gen.1&version=niv
+    body: !!null 
+    headers:
+      referer:
+      - https://api.yvdev.com
+  response: !ruby/struct:VCR::Response
+    status: !ruby/struct:VCR::ResponseStatus
+      code: 301
+      message: Moved Permanently
+    headers:
+      server:
+      - nginx/0.7.67
+      date:
+      - Thu, 20 Oct 2011 13:54:06 GMT
+      content-type:
+      - text/html
+      content-length:
+      - '185'
+      connection:
+      - keep-alive
+      location:
+      - http://api.yvdev.com/2.3/bible/chapter.json?format=html&version=niv&reference=gen.1
+    body: ! "<html>\r\n<head><title>301 Moved Permanently</title></head>\r\n<body
+      bgcolor=\"white\">\r\n<center><h1>301 Moved Permanently</h1></center>\r\n<hr><center>nginx/0.7.67</center>\r\n</body>\r\n</html>\r\n"
+    http_version: '1.1'
+- !ruby/struct:VCR::HTTPInteraction
+  request: !ruby/struct:VCR::Request
+    method: :get
+    uri: http://api.yvdev.com:80/2.3/bible/chapter.json?format=html&reference=gen.1&version=niv
+    body: !!null 
+    headers:
+      referer:
+      - https://api.yvdev.com
+  response: !ruby/struct:VCR::Response
+    status: !ruby/struct:VCR::ResponseStatus
+      code: 200
+      message: OK
+    headers:
+      server:
+      - nginx/0.7.67
+      date:
+      - Thu, 20 Oct 2011 13:54:07 GMT
+      content-type:
+      - text/plain; charset=utf-8
+      transfer-encoding:
+      - chunked
+      connection:
+      - keep-alive
+      vary:
+      - Accept-Encoding
+    body: ! '{"response":{"code":200,"data":[{"code":"200","data":{"copyright":"Holy
+      Bible, New International Version, NIV. Copyright 1973, 1978, 1984, 2011 by Biblica,
+      Inc. Used by permission. All rights reserved worldwide.","request":{"reference":{"osis":"Gen.1","human":"Genesis
+      1"},"content":"<div><h1 class=\"Gen_1\">Genesis 1<\/h1><h2>The Beginning<\/h2><p><span
+      class=\"verse Gen_1_1\"><strong>1<\/strong>\u00a0In the beginning God created
+      the heavens and the earth.<\/span><span class=\"verse Gen_1_2\"><strong>2<\/strong>\u00a0Now
+      the earth was formless and empty, darkness was over the surface of the deep,
+      and the Spirit of God was hovering over the waters.<\/span><\/p><p><span class=\"verse
+      Gen_1_3\"><strong>3<\/strong>\u00a0And God said, \"Let there be light,\" and
+      there was light.<\/span><span class=\"verse Gen_1_4\"><strong>4<\/strong>\u00a0God
+      saw that the light was good, and he separated the light from the darkness.<\/span><span
+      class=\"verse Gen_1_5\"><strong>5<\/strong>\u00a0God called the light \"day,\"
+      and the darkness he called \"night.\" And there was evening, and there was morning\u2014the
+      first day.<\/span><\/p><p><span class=\"verse Gen_1_6\"><strong>6<\/strong>\u00a0And
+      God said, \"Let there be a vault between the waters to separate water from water.\"<\/span><span
+      class=\"verse Gen_1_7\"><strong>7<\/strong>\u00a0So God made the vault and separated
+      the water under the vault from the water above it. And it was so.<\/span><span
+      class=\"verse Gen_1_8\"><strong>8<\/strong>\u00a0God called the vault \"sky.\"
+      And there was evening, and there was morning\u2014the second day.<\/span><\/p><p><span
+      class=\"verse Gen_1_9\"><strong>9<\/strong>\u00a0And God said, \"Let the water
+      under the sky be gathered to one place, and let dry ground appear.\" And it
+      was so.<\/span><span class=\"verse Gen_1_10\"><strong>10<\/strong>\u00a0God
+      called the dry ground \"land,\" and the gathered waters he called \"seas.\"
+      And God saw that it was good.<\/span><\/p><p><span class=\"verse Gen_1_11\"><strong>11<\/strong>\u00a0Then
+      God said, \"Let the land produce vegetation: seed-bearing plants and trees on
+      the land that bear fruit with seed in it, according to their various kinds.\"
+      And it was so.<\/span><span class=\"verse Gen_1_12\"><strong>12<\/strong>\u00a0The
+      land produced vegetation: plants bearing seed according to their kinds and trees
+      bearing fruit with seed in it according to their kinds. And God saw that it
+      was good.<\/span><span class=\"verse Gen_1_13\"><strong>13<\/strong>\u00a0And
+      there was evening, and there was morning\u2014the third day.<\/span><\/p><p><span
+      class=\"verse Gen_1_14\"><strong>14<\/strong>\u00a0And God said, \"Let there
+      be lights in the vault of the sky to separate the day from the night, and let
+      them serve as signs to mark sacred times, and days and years,<\/span><span class=\"verse
+      Gen_1_15\"><strong>15<\/strong>\u00a0and let them be lights in the vault of
+      the sky to give light on the earth.\" And it was so.<\/span><span class=\"verse
+      Gen_1_16\"><strong>16<\/strong>\u00a0God made two great lights\u2014the greater
+      light to govern the day and the lesser light to govern the night. He also made
+      the stars.<\/span><span class=\"verse Gen_1_17\"><strong>17<\/strong>\u00a0God
+      set them in the vault of the sky to give light on the earth,<\/span><span class=\"verse
+      Gen_1_18\"><strong>18<\/strong>\u00a0to govern the day and the night, and to
+      separate light from darkness. And God saw that it was good.<\/span><span class=\"verse
+      Gen_1_19\"><strong>19<\/strong>\u00a0And there was evening, and there was morning\u2014the
+      fourth day.<\/span><\/p><p><span class=\"verse Gen_1_20\"><strong>20<\/strong>\u00a0And
+      God said, \"Let the water teem with living creatures, and let birds fly above
+      the earth across the vault of the sky.\"<\/span><span class=\"verse Gen_1_21\"><strong>21<\/strong>\u00a0So
+      God created the great creatures of the sea and every living thing with which
+      the water teems and that moves about in it, according to their kinds, and every
+      winged bird according to its kind. And God saw that it was good.<\/span><span
+      class=\"verse Gen_1_22\"><strong>22<\/strong>\u00a0God blessed them and said,
+      \"Be fruitful and increase in number and fill the water in the seas, and let
+      the birds increase on the earth.\"<\/span><span class=\"verse Gen_1_23\"><strong>23<\/strong>\u00a0And
+      there was evening, and there was morning\u2014the fifth day.<\/span><\/p><p><span
+      class=\"verse Gen_1_24\"><strong>24<\/strong>\u00a0And God said, \"Let the land
+      produce living creatures according to their kinds: the livestock, the creatures
+      that move along the ground, and the wild animals, each according to its kind.\"
+      And it was so.<\/span><span class=\"verse Gen_1_25\"><strong>25<\/strong>\u00a0God
+      made the wild animals according to their kinds, the livestock according to their
+      kinds, and all the creatures that move along the ground according to their kinds.
+      And God saw that it was good.<\/span><\/p><p><span class=\"verse Gen_1_26\"><strong>26<\/strong>\u00a0Then
+      God said, \"Let us make mankind in our image, in our likeness, so that they
+      may rule over the fish in the sea and the birds in the sky, over the livestock
+      and all the wild animals,<span class=\"trans\" title=\"26 Probable reading of
+      the original Hebrew text (see Syriac); Masoretic Text the earth\">t<\/span>
+      and over all the creatures that move along the ground.\"<\/span><\/p><p><span
+      class=\"verse Gen_1_27\"><strong>27<\/strong>\u00a0So God created mankind in
+      his own image,<br\/>in the image of God he created them;<br\/>male and female
+      he created them.<\/span><\/p><p><span class=\"verse Gen_1_28\"><strong>28<\/strong>\u00a0God
+      blessed them and said to them, \"Be fruitful and increase in number; fill the
+      earth and subdue it. Rule over the fish in the sea and the birds in the sky
+      and over every living creature that moves on the ground.\"<\/span><\/p><p><span
+      class=\"verse Gen_1_29\"><strong>29<\/strong>\u00a0Then God said, \"I give you
+      every seed-bearing plant on the face of the whole earth and every tree that
+      has fruit with seed in it. They will be yours for food.<\/span><span class=\"verse
+      Gen_1_30\"><strong>30<\/strong>\u00a0And to all the beasts of the earth and
+      all the birds in the sky and all the creatures that move along the ground\u2014everything
+      that has the breath of life in it\u2014I give every green plant for food.\"
+      And it was so.<\/span><\/p><p><span class=\"verse Gen_1_31\"><strong>31<\/strong>\u00a0God
+      saw all that he had made, and it was very good. And there was evening, and there
+      was morning\u2014the sixth day.<\/span><\/p><\/div>\n","audio":[{"id":"3","title":"NIV
+      Listener''s Bible","download_urls":{"format_mp3_32k":"http:\/\/cdn-http.audio-bible.api.youversion.com\/niv84\/2\/32k\/gen\/001-8af7d4f598f6d657a4309b2e05f71ea5.mp3"}}]},"previous":"","next":{"reference":{"osis":"Gen.2","human":"Genesis
+      2"}}},"buildtime":"2011-10-20T13:54:07+00:00"}],"buildtime":"2011-10-20T13:54:07+00:00"}}'
+    http_version: '1.1'
+- !ruby/struct:VCR::HTTPInteraction
+  request: !ruby/struct:VCR::Request
+    method: :get
+    uri: https://api.yvdev.com:443/2.3/bible/chapter.json?format=html&reference=gen.1&version=dra
+    body: !!null 
+    headers:
+      referer:
+      - https://api.yvdev.com
+  response: !ruby/struct:VCR::Response
+    status: !ruby/struct:VCR::ResponseStatus
+      code: 301
+      message: Moved Permanently
+    headers:
+      server:
+      - nginx/0.7.67
+      date:
+      - Thu, 20 Oct 2011 13:54:08 GMT
+      content-type:
+      - text/html
+      content-length:
+      - '185'
+      connection:
+      - keep-alive
+      location:
+      - http://api.yvdev.com/2.3/bible/chapter.json?format=html&version=dra&reference=gen.1
+    body: ! "<html>\r\n<head><title>301 Moved Permanently</title></head>\r\n<body
+      bgcolor=\"white\">\r\n<center><h1>301 Moved Permanently</h1></center>\r\n<hr><center>nginx/0.7.67</center>\r\n</body>\r\n</html>\r\n"
+    http_version: '1.1'
+- !ruby/struct:VCR::HTTPInteraction
+  request: !ruby/struct:VCR::Request
+    method: :get
+    uri: http://api.yvdev.com:80/2.3/bible/chapter.json?format=html&reference=gen.1&version=dra
+    body: !!null 
+    headers:
+      referer:
+      - https://api.yvdev.com
+  response: !ruby/struct:VCR::Response
+    status: !ruby/struct:VCR::ResponseStatus
+      code: 200
+      message: OK
+    headers:
+      server:
+      - nginx/0.7.67
+      date:
+      - Thu, 20 Oct 2011 13:54:09 GMT
+      content-type:
+      - text/plain; charset=utf-8
+      transfer-encoding:
+      - chunked
+      connection:
+      - keep-alive
+      vary:
+      - Accept-Encoding
+    body: ! '{"response":{"code":200,"data":[{"code":"200","data":{"copyright":"","request":{"reference":{"osis":"Gen.1","human":"Genesis
+      1"},"content":"<div><h1 class=\"Gen_1\">Genesis 1<\/h1><p><span class=\"verse
+      Gen_1_1\"><strong>1<\/strong>\u00a0In the beginning God created heaven, and
+      earth.<\/span><span class=\"verse Gen_1_2\"><strong>2<\/strong>\u00a0And the
+      earth was void and empty, and darkness was upon the face\n                of
+      the deep; and the spirit of God moved over the waters.<\/span><span class=\"verse
+      Gen_1_3\"><strong>3<\/strong>\u00a0And God said: Be light made. And light was
+      made.<\/span><span class=\"verse Gen_1_4\"><strong>4<\/strong>\u00a0And God
+      saw the light that it was good; and he divided the light\n                from
+      the darkness.<\/span><span class=\"verse Gen_1_5\"><strong>5<\/strong>\u00a0And
+      he called the light Day, and the darkness Night; and there\n                was
+      evening and morning one day.<\/span><span class=\"verse Gen_1_6\"><strong>6<\/strong>\u00a0And
+      God said: Let there be a firmament made amidst the waters:\n                and
+      let it divide the waters from the waters.<\/span><span class=\"verse Gen_1_7\"><strong>7<\/strong>\u00a0And
+      God made a firmament, and divided the waters that were under\n                the
+      firmament, from those that were above the firmament, and it was so.<\/span><span
+      class=\"verse Gen_1_8\"><strong>8<\/strong>\u00a0And God called the firmament,
+      Heaven; and the evening and\n                morning were the second day.<\/span><span
+      class=\"verse Gen_1_9\"><strong>9<\/strong>\u00a0God also said: Let the waters
+      that are under the heaven, be\n                gathered together into one place:
+      and let the dry land appear. And it was so\n                done.<\/span><span
+      class=\"verse Gen_1_10\"><strong>10<\/strong>\u00a0And God called the dry land,
+      Earth; and the gathering together\n                of the waters, he called
+      Seas. And God saw that it was good.<\/span><span class=\"verse Gen_1_11\"><strong>11<\/strong>\u00a0And
+      he said: Let the earth bring forth the green herb, and such\n                as
+      may seed, and the fruit tree yielding fruit after its kind, which may have seed\n                in
+      itself upon the earth. And it was so done.<\/span><span class=\"verse Gen_1_12\"><strong>12<\/strong>\u00a0And
+      the earth brought forth the green herb, and such as\n                yieldeth
+      seed according to its kind, and the tree that beareth fruit having seed\n                each
+      one according to its kind. And God saw that it was good.<\/span><span class=\"verse
+      Gen_1_13\"><strong>13<\/strong>\u00a0And the evening and the morning were the
+      third day.<\/span><span class=\"verse Gen_1_14\"><strong>14<\/strong>\u00a0And
+      God said: Let there be lights made in the firmament of\n                heaven,
+      to divide the day and the night, and let them be for signs, and for seasons,\n                and
+      for days and years:<\/span><span class=\"verse Gen_1_15\"><strong>15<\/strong>\u00a0To
+      shine in the firmament of heaven, and to give light upon the\n                earth.
+      And it was so done.<\/span><span class=\"verse Gen_1_16\"><strong>16<\/strong>\u00a0And
+      God made two great lights: a greater light to rule the day;\n                and
+      a lesser light to rule the night: and the stars.<\/span><span class=\"verse
+      Gen_1_17\"><strong>17<\/strong>\u00a0And he set them in the firmament of heaven
+      to shine upon the\n                earth.<\/span><span class=\"verse Gen_1_18\"><strong>18<\/strong>\u00a0And
+      to rule the day and the night, and to divide the light and\n                the
+      darkness. And God saw that it was good.<\/span><span class=\"verse Gen_1_19\"><strong>19<\/strong>\u00a0And
+      the evening and morning were the fourth day.<\/span><span class=\"verse Gen_1_20\"><strong>20<\/strong>\u00a0God
+      also said: Let the waters bring forth the creeping creature\n                having
+      life, and the fowl that may fly over the earth under the firmament of\n                heaven.<\/span><span
+      class=\"verse Gen_1_21\"><strong>21<\/strong>\u00a0And God created the great
+      whales, and every living and moving\n                creature, which the waters
+      brought forth, according to their kinds, and every winged\n                fowl
+      according to its kind. And God saw that it was good.<\/span><span class=\"verse
+      Gen_1_22\"><strong>22<\/strong>\u00a0And he blessed them, saying: Increase and
+      multiply, and fill\n                the waters of the sea: and let the birds
+      be multiplied upon the earth.<\/span><span class=\"verse Gen_1_23\"><strong>23<\/strong>\u00a0And
+      the evening and morning were the fifth day.<\/span><span class=\"verse Gen_1_24\"><strong>24<\/strong>\u00a0And
+      God said: Let the earth bring forth the living creature in\n                its
+      kind, cattle and creeping things, and beasts of the earth, according to their\n                kinds.
+      And it was so done.<\/span><span class=\"verse Gen_1_25\"><strong>25<\/strong>\u00a0And
+      God made the beasts of the earth according to their kinds,\n                and
+      cattle, and every thing that creepeth on the earth after its kind. And God saw\n                that
+      it was good.<\/span><span class=\"verse Gen_1_26\"><strong>26<\/strong>\u00a0And
+      he said: Let us make man to our image and likeness: and let\n                him
+      have dominion over the fishes of the sea, and the fowls of the air, and the\n                beasts,
+      and the whole earth, and every creeping creature that moveth upon the\n                earth.<\/span><span
+      class=\"verse Gen_1_27\"><strong>27<\/strong>\u00a0And God created man to his
+      own image: to the image of God he\n                created him: male and female
+      he created them.<\/span><span class=\"verse Gen_1_28\"><strong>28<\/strong>\u00a0And
+      God blessed them, saying: Increase and multiply, and fill\n                the
+      earth, and subdue it, and rule over the fishes of the sea, and the fowls of
+      the\n                air, and all living creatures that move upon the earth.<\/span><span
+      class=\"verse Gen_1_29\"><strong>29<\/strong>\u00a0And God said: Behold I have
+      given you every herb bearing seed\n                upon the earth, and all trees
+      that have in themselves seed of their own kind, to be\n                your
+      meat:<\/span><span class=\"verse Gen_1_30\"><strong>30<\/strong>\u00a0And to
+      all the beasts of the earth, and to every fowl of the\n                air,
+      and to all that move upon the earth, and wherein there is life, that they may\n                have
+      to feed upon. And it was so done.<\/span><span class=\"verse Gen_1_31\"><strong>31<\/strong>\u00a0And
+      God saw all the things that he had made, and they were very\n                good.
+      And the evening and morning were the sixth day.<\/span><\/p><\/div>\n","audio":null},"previous":"","next":{"reference":{"osis":"Gen.2","human":"Genesis
+      2"}}},"buildtime":"2011-10-20T13:54:09+00:00"}],"buildtime":"2011-10-20T13:54:09+00:00"}}'
+    http_version: '1.1'
+- !ruby/struct:VCR::HTTPInteraction
+  request: !ruby/struct:VCR::Request
+    method: :get
+    uri: https://api.yvdev.com:443/2.3/bible/chapter.json?format=html&reference=exod.1&version=niv
+    body: !!null 
+    headers:
+      referer:
+      - https://api.yvdev.com
+  response: !ruby/struct:VCR::Response
+    status: !ruby/struct:VCR::ResponseStatus
+      code: 301
+      message: Moved Permanently
+    headers:
+      server:
+      - nginx/0.7.67
+      date:
+      - Thu, 20 Oct 2011 13:54:10 GMT
+      content-type:
+      - text/html
+      content-length:
+      - '185'
+      connection:
+      - keep-alive
+      location:
+      - http://api.yvdev.com/2.3/bible/chapter.json?format=html&version=niv&reference=exod.1
+    body: ! "<html>\r\n<head><title>301 Moved Permanently</title></head>\r\n<body
+      bgcolor=\"white\">\r\n<center><h1>301 Moved Permanently</h1></center>\r\n<hr><center>nginx/0.7.67</center>\r\n</body>\r\n</html>\r\n"
+    http_version: '1.1'
+- !ruby/struct:VCR::HTTPInteraction
+  request: !ruby/struct:VCR::Request
+    method: :get
+    uri: http://api.yvdev.com:80/2.3/bible/chapter.json?format=html&reference=exod.1&version=niv
+    body: !!null 
+    headers:
+      referer:
+      - https://api.yvdev.com
+  response: !ruby/struct:VCR::Response
+    status: !ruby/struct:VCR::ResponseStatus
+      code: 200
+      message: OK
+    headers:
+      server:
+      - nginx/0.7.67
+      date:
+      - Thu, 20 Oct 2011 13:54:10 GMT
+      content-type:
+      - text/plain; charset=utf-8
+      transfer-encoding:
+      - chunked
+      connection:
+      - keep-alive
+      vary:
+      - Accept-Encoding
+    body: ! '{"response":{"code":200,"data":[{"code":"200","data":{"copyright":"Holy
+      Bible, New International Version, NIV. Copyright 1973, 1978, 1984, 2011 by Biblica,
+      Inc. Used by permission. All rights reserved worldwide.","request":{"reference":{"osis":"Exod.1","human":"Exodus
+      1"},"content":"<div><h1 class=\"Exod_1\">Exodus 1<\/h1><h2>The Israelites Oppressed<\/h2><p><span
+      class=\"verse Exod_1_1\"><strong>1<\/strong>\u00a0These are the names of the
+      sons of Israel who went to Egypt with Jacob, each with his family:<\/span><span
+      class=\"verse Exod_1_2\"><strong>2<\/strong>\u00a0Reuben, Simeon, Levi and Judah;<\/span><span
+      class=\"verse Exod_1_3\"><strong>3<\/strong>\u00a0Issachar, Zebulun and Benjamin;<\/span><span
+      class=\"verse Exod_1_4\"><strong>4<\/strong>\u00a0Dan and Naphtali; Gad and
+      Asher.<\/span><span class=\"verse Exod_1_5\"><strong>5<\/strong>\u00a0The descendants
+      of Jacob numbered seventy<span class=\"trans\" title=\"5 Masoretic Text (see
+      also Gen. 46:27); Dead Sea Scrolls and Septuagint (see also Acts 7:14 and note
+      at Gen. 46:27) seventy-five\">t<\/span> in all; Joseph was already in Egypt.<\/span><\/p><p><span
+      class=\"verse Exod_1_6\"><strong>6<\/strong>\u00a0Now Joseph and all his brothers
+      and all that generation died,<\/span><span class=\"verse Exod_1_7\"><strong>7<\/strong>\u00a0but
+      the Israelites were exceedingly fruitful; they multiplied greatly, increased
+      in numbers and became so numerous that the land was filled with them.<\/span><\/p><p><span
+      class=\"verse Exod_1_8\"><strong>8<\/strong>\u00a0Then a new king, to whom Joseph
+      meant nothing, came to power in Egypt.<\/span><span class=\"verse Exod_1_9\"><strong>9<\/strong>\u00a0\"Look,\"
+      he said to his people, \"the Israelites have become far too numerous for us.<\/span><span
+      class=\"verse Exod_1_10\"><strong>10<\/strong>\u00a0Come, we must deal shrewdly
+      with them or they will become even more numerous and, if war breaks out, will
+      join our enemies, fight against us and leave the country.\"<\/span><\/p><p><span
+      class=\"verse Exod_1_11\"><strong>11<\/strong>\u00a0So they put slave masters
+      over them to oppress them with forced labor, and they built Pithom and Rameses
+      as store cities for Pharaoh.<\/span><span class=\"verse Exod_1_12\"><strong>12<\/strong>\u00a0But
+      the more they were oppressed, the more they multiplied and spread; so the Egyptians
+      came to dread the Israelites<\/span><span class=\"verse Exod_1_13\"><strong>13<\/strong>\u00a0and
+      worked them ruthlessly.<\/span><span class=\"verse Exod_1_14\"><strong>14<\/strong>\u00a0They
+      made their lives bitter with harsh labor in brick and mortar and with all kinds
+      of work in the fields; in all their harsh labor the Egyptians worked them ruthlessly.<\/span><\/p><p><span
+      class=\"verse Exod_1_15\"><strong>15<\/strong>\u00a0The king of Egypt said to
+      the Hebrew midwives, whose names were Shiphrah and Puah,<\/span><span class=\"verse
+      Exod_1_16\"><strong>16<\/strong>\u00a0\"When you are helping the Hebrew women
+      during childbirth on the delivery stool, if you see that the baby is a boy,
+      kill him; but if it is a girl, let her live.\"<\/span><span class=\"verse Exod_1_17\"><strong>17<\/strong>\u00a0The
+      midwives, however, feared God and did not do what the king of Egypt had told
+      them to do; they let the boys live.<\/span><span class=\"verse Exod_1_18\"><strong>18<\/strong>\u00a0Then
+      the king of Egypt summoned the midwives and asked them, \"Why have you done
+      this? Why have you let the boys live?\"<\/span><\/p><p><span class=\"verse Exod_1_19\"><strong>19<\/strong>\u00a0The
+      midwives answered Pharaoh, \"Hebrew women are not like Egyptian women; they
+      are vigorous and give birth before the midwives arrive.\"<\/span><\/p><p><span
+      class=\"verse Exod_1_20\"><strong>20<\/strong>\u00a0So God was kind to the midwives
+      and the people increased and became even more numerous.<\/span><span class=\"verse
+      Exod_1_21\"><strong>21<\/strong>\u00a0And because the midwives feared God, he
+      gave them families of their own.<\/span><\/p><p><span class=\"verse Exod_1_22\"><strong>22<\/strong>\u00a0Then
+      Pharaoh gave this order to all his people: \"Every Hebrew boy that is born you
+      must throw into the Nile, but let every girl live.\"<\/span><\/p><\/div>\n","audio":[{"id":"3","title":"NIV
+      Listener''s Bible","download_urls":{"format_mp3_32k":"http:\/\/cdn-http.audio-bible.api.youversion.com\/niv84\/2\/32k\/exod\/001-7af98ff32cbbce1761a74a3692d8ee0a.mp3"}}]},"previous":{"reference":{"osis":"Gen.50","human":"Genesis
+      50"}},"next":{"reference":{"osis":"Exod.2","human":"Exodus 2"}}},"buildtime":"2011-10-20T13:54:10+00:00"}],"buildtime":"2011-10-20T13:54:10+00:00"}}'
+    http_version: '1.1'
+- !ruby/struct:VCR::HTTPInteraction
+  request: !ruby/struct:VCR::Request
+    method: :get
+    uri: https://api.yvdev.com:443/2.3/bible/chapter.json?format=html&reference=gen.1&version=msg
+    body: !!null 
+    headers:
+      referer:
+      - https://api.yvdev.com
+  response: !ruby/struct:VCR::Response
+    status: !ruby/struct:VCR::ResponseStatus
+      code: 301
+      message: Moved Permanently
+    headers:
+      server:
+      - nginx/0.7.67
+      date:
+      - Thu, 20 Oct 2011 13:54:13 GMT
+      content-type:
+      - text/html
+      content-length:
+      - '185'
+      connection:
+      - keep-alive
+      location:
+      - http://api.yvdev.com/2.3/bible/chapter.json?format=html&version=msg&reference=gen.1
+    body: ! "<html>\r\n<head><title>301 Moved Permanently</title></head>\r\n<body
+      bgcolor=\"white\">\r\n<center><h1>301 Moved Permanently</h1></center>\r\n<hr><center>nginx/0.7.67</center>\r\n</body>\r\n</html>\r\n"
+    http_version: '1.1'
+- !ruby/struct:VCR::HTTPInteraction
+  request: !ruby/struct:VCR::Request
+    method: :get
+    uri: http://api.yvdev.com:80/2.3/bible/chapter.json?format=html&reference=gen.1&version=msg
+    body: !!null 
+    headers:
+      referer:
+      - https://api.yvdev.com
+  response: !ruby/struct:VCR::Response
+    status: !ruby/struct:VCR::ResponseStatus
+      code: 200
+      message: OK
+    headers:
+      server:
+      - nginx/0.7.67
+      date:
+      - Thu, 20 Oct 2011 13:54:13 GMT
+      content-type:
+      - text/plain; charset=utf-8
+      transfer-encoding:
+      - chunked
+      connection:
+      - keep-alive
+      vary:
+      - Accept-Encoding
+    body: ! '{"response":{"code":200,"data":[{"code":"200","data":{"copyright":"1993,
+      1994, 1995, 1996, 2000, 2001, 2002 Eugene H. Peterson by NavPress Publishing","request":{"reference":{"osis":"Gen.1","human":"Genesis
+      1"},"content":"<div><h1 class=\"Gen_1\">Genesis 1<\/h1><h2>Heaven and Earth<\/h2><p><span
+      class=\"verse Gen_1_1\"><strong>1<\/strong>\u00a0First this: God created the
+      Heavens and Earth-all you see, all you don''t see.<\/span><span class=\"verse
+      Gen_1_2\"><strong>2<\/strong>\u00a0Earth was a soup of nothingness, a bottomless
+      emptiness, an inky blackness. God''s Spirit brooded like a bird above the watery
+      abyss.<\/span><\/p><p><span class=\"verse Gen_1_3\"><strong>3<\/strong>\u00a0God
+      spoke: \"Light!\" And light appeared.<\/span><span class=\"verse Gen_1_4\"><strong>4<\/strong>\u00a0God
+      saw that light was good and separated light from dark.<\/span><span class=\"verse
+      Gen_1_5\"><strong>5<\/strong>\u00a0God named the light Day, he named the dark
+      Night. It was evening, it was morning-Day One.<\/span><\/p><p><span class=\"verse
+      Gen_1_6\"><strong>6<\/strong>\u00a0God spoke: \"Sky! In the middle of the waters;
+      separate water from water!\"<\/span><span class=\"verse Gen_1_7\"><strong>7<\/strong>\u00a0God
+      made sky. He separated the water under sky from the water above sky. And there
+      it was:<\/span><span class=\"verse Gen_1_8\"><strong>8<\/strong>\u00a0he named
+      sky the Heavens; It was evening, it was morning-Day Two.<\/span><\/p><p><span
+      class=\"verse Gen_1_9\"><strong>9<\/strong>\u00a0God spoke: \"Separate! Water-beneath-Heaven,
+      gather into one place; Land, appear!\" And there it was.<\/span><span class=\"verse
+      Gen_1_10\"><strong>10<\/strong>\u00a0God named the land Earth. He named the
+      pooled water Ocean. God saw that it was good.<\/span><\/p><p><span class=\"verse
+      Gen_1_11\"><strong>11<\/strong>\u00a0God spoke: \"Earth, green up! Grow all
+      varieties of seed-bearing plants, Every sort of fruit-bearing tree.\" And there
+      it was.<\/span><span class=\"verse Gen_1_12\"><strong>12<\/strong>\u00a0Earth
+      produced green seed-bearing plants, all varieties, And fruit-bearing trees of
+      all sorts. God saw that it was good.<\/span><span class=\"verse Gen_1_13\"><strong>13<\/strong>\u00a0It
+      was evening, it was morning-Day Three.<\/span><\/p><p><span class=\"verse Gen_1_14\"><strong>14<\/strong>\u00a0God
+      spoke: \"Lights! Come out! Shine in Heaven''s sky! Separate Day from Night.
+      Mark seasons and days and years,<\/span><span class=\"verse Gen_1_15\"><strong>15<\/strong>\u00a0Lights
+      in Heaven''s sky to give light to Earth.\" And there it was.<\/span><\/p><p><span
+      class=\"verse Gen_1_16\"><strong>16<\/strong>\u00a0God made two big lights,
+      the larger to take charge of Day, The smaller to be in charge of Night; and
+      he made the stars.<\/span><span class=\"verse Gen_1_17\"><strong>17<\/strong>\u00a0God
+      placed them in the heavenly sky to light up Earth<\/span><span class=\"verse
+      Gen_1_18\"><strong>18<\/strong>\u00a0And oversee Day and Night, to separate
+      light and dark. God saw that it was good.<\/span><span class=\"verse Gen_1_19\"><strong>19<\/strong>\u00a0It
+      was evening, it was morning-Day Four.<\/span><\/p><p><span class=\"verse Gen_1_20\"><strong>20<\/strong>\u00a0God
+      spoke: \"Swarm, Ocean, with fish and all sea life! Birds, fly through the sky
+      over Earth!\"<\/span><span class=\"verse Gen_1_21\"><strong>21<\/strong>\u00a0God
+      created the huge whales, all the swarm of life in the waters, And every kind
+      and species of flying birds. God saw that it was good.<\/span><span class=\"verse
+      Gen_1_22\"><strong>22<\/strong>\u00a0God blessed them: \"Prosper! Reproduce!
+      Fill Ocean! Birds, reproduce on Earth!\"<\/span><span class=\"verse Gen_1_23\"><strong>23<\/strong>\u00a0It
+      was evening, it was morning-Day Five.<\/span><\/p><p><span class=\"verse Gen_1_24\"><strong>24<\/strong>\u00a0God
+      spoke: \"Earth, generate life! Every sort and kind: cattle and reptiles and
+      wild animals-all kinds.\" And there it was:<\/span><span class=\"verse Gen_1_25\"><strong>25<\/strong>\u00a0wild
+      animals of every kind, Cattle of all kinds, every sort of reptile and bug. God
+      saw that it was good.<\/span><\/p><p><span class=\"verse Gen_1_26\"><strong>26<\/strong>\u00a0God
+      spoke: \"Let us make human beings in our image, make them reflecting our nature
+      So they can be responsible for the fish in the sea, the birds in the air, the
+      cattle, And, yes, Earth itself, and every animal that moves on the face of Earth.\"<\/span><span
+      class=\"verse Gen_1_27\"><strong>27<\/strong>\u00a0God created human beings;
+      he created them godlike, Reflecting God''s nature. He created them male and
+      female.<\/span><span class=\"verse Gen_1_28\"><strong>28<\/strong>\u00a0God
+      blessed them: \"Prosper! Reproduce! Fill Earth! Take charge! Be responsible
+      for fish in the sea and birds in the air, for every living thing that moves
+      on the face of Earth.\"<\/span><\/p><p><span class=\"verse Gen_1_29\"><strong>29<\/strong>\u00a0Then
+      God said, \"I''ve given you every sort of seed-bearing plant on Earth And every
+      kind of fruit-bearing tree, given them to you for food.<\/span><span class=\"verse
+      Gen_1_30\"><strong>30<\/strong>\u00a0To all animals and all birds, everything
+      that moves and breathes, I give whatever grows out of the ground for food.\"
+      And there it was.<\/span><\/p><p><span class=\"verse Gen_1_31\"><strong>31<\/strong>\u00a0God
+      looked over everything he had made; it was so good, so very good! It was evening,
+      it was morning-Day Six.<\/span><\/p><\/div>\n","audio":null},"previous":"","next":{"reference":{"osis":"Gen.2","human":"Genesis
+      2"}}},"buildtime":"2011-10-20T13:54:13+00:00"}],"buildtime":"2011-10-20T13:54:13+00:00"}}'
+    http_version: '1.1'
diff --git a/fixtures/vcr/cuke/cucumber_tags/user.yml b/fixtures/vcr/cuke/cucumber_tags/user.yml
index e650a97..a6b2299 100644
--- a/fixtures/vcr/cuke/cucumber_tags/user.yml
+++ b/fixtures/vcr/cuke/cucumber_tags/user.yml
@@ -447,3 +447,115 @@
     body: ! '{"response":{"code":200,"data":{"id":"4163169","username":"cukeuser3","user_avatar_url":{"px_24x24":"http:\/\/avatars.youversion.com\/0febb3a634fae08529c07d3c0d143871_24x24.png","px_48x48":"http:\/\/avatars.youversion.com\/0febb3a634fae08529c07d3c0d143871_48x48.png","px_128x128":"http:\/\/avatars.youversion.com\/0febb3a634fae08529c07d3c0d143871_128x128.png","px_512x512":"http:\/\/avatars.youversion.com\/0febb3a634fae08529c07d3c0d143871_512x512.png"},"name":null,"first_name":null,"last_name":null,"location":null,"im_type":null,"im_value":null,"website":null,"mobile":null,"postal_code":null,"language":"false","country":"  ","timezone":"UTC","created":"2011-10-19
       18:10:14.430167+00","last_login":"2011-10-19 18:10:15+00","twitter":null,"facebook":null,"email":"cukeuser3@youversion.com","notice_contrib_fav":"true","notice_follower":"true","notice_newsletter":"true","notice_badges":"true","notice_reading_plans":"true"},"buildtime":"2011-10-19T18:10:15+00:00"}}'
     http_version: '1.1'
+- !ruby/struct:VCR::HTTPInteraction
+  request: !ruby/struct:VCR::Request
+    method: :get
+    uri: https://api.yvdev.com:443/2.3/users/view.json?auth_user_id=id&user_id=4163169
+    body: !!null 
+    headers:
+      referer:
+      - https://api.yvdev.com
+  response: !ruby/struct:VCR::Response
+    status: !ruby/struct:VCR::ResponseStatus
+      code: 301
+      message: Moved Permanently
+    headers:
+      server:
+      - nginx/0.7.67
+      date:
+      - Thu, 20 Oct 2011 13:54:11 GMT
+      content-type:
+      - text/html
+      content-length:
+      - '185'
+      connection:
+      - keep-alive
+      location:
+      - http://api.yvdev.com/2.3/users/view.json?user_id=4163169&auth_user_id=id
+    body: ! "<html>\r\n<head><title>301 Moved Permanently</title></head>\r\n<body
+      bgcolor=\"white\">\r\n<center><h1>301 Moved Permanently</h1></center>\r\n<hr><center>nginx/0.7.67</center>\r\n</body>\r\n</html>\r\n"
+    http_version: '1.1'
+- !ruby/struct:VCR::HTTPInteraction
+  request: !ruby/struct:VCR::Request
+    method: :get
+    uri: http://api.yvdev.com:80/2.3/users/view.json?auth_user_id=id&user_id=4163169
+    body: !!null 
+    headers:
+      referer:
+      - https://api.yvdev.com
+  response: !ruby/struct:VCR::Response
+    status: !ruby/struct:VCR::ResponseStatus
+      code: 200
+      message: OK
+    headers:
+      server:
+      - nginx/0.7.67
+      date:
+      - Thu, 20 Oct 2011 13:54:11 GMT
+      content-type:
+      - text/plain; charset=utf-8
+      transfer-encoding:
+      - chunked
+      connection:
+      - keep-alive
+      vary:
+      - Accept-Encoding
+    body: ! '{"response":{"code":200,"data":{"id":"4163169","username":"cukeuser3","user_avatar_url":{"px_24x24":"http:\/\/avatars.youversion.com\/0febb3a634fae08529c07d3c0d143871_24x24.png","px_48x48":"http:\/\/avatars.youversion.com\/0febb3a634fae08529c07d3c0d143871_48x48.png","px_128x128":"http:\/\/avatars.youversion.com\/0febb3a634fae08529c07d3c0d143871_128x128.png","px_512x512":"http:\/\/avatars.youversion.com\/0febb3a634fae08529c07d3c0d143871_512x512.png"},"name":null,"first_name":null,"last_name":null,"location":null,"im_type":null,"im_value":null,"website":null,"language":"false","country":"  ","timezone":"UTC","created":"2011-10-19
+      18:10:14.430167+00","last_login":"2011-10-19 18:11:00+00"},"buildtime":"2011-10-20T13:54:11+00:00"}}'
+    http_version: '1.1'
+- !ruby/struct:VCR::HTTPInteraction
+  request: !ruby/struct:VCR::Request
+    method: :get
+    uri: https://api.yvdev.com:443/2.3/users/view.json?auth_user_id=id&user_id=4163169
+    body: !!null 
+    headers:
+      referer:
+      - https://api.yvdev.com
+  response: !ruby/struct:VCR::Response
+    status: !ruby/struct:VCR::ResponseStatus
+      code: 301
+      message: Moved Permanently
+    headers:
+      server:
+      - nginx/0.7.67
+      date:
+      - Thu, 20 Oct 2011 13:54:12 GMT
+      content-type:
+      - text/html
+      content-length:
+      - '185'
+      connection:
+      - keep-alive
+      location:
+      - http://api.yvdev.com/2.3/users/view.json?user_id=4163169&auth_user_id=id
+    body: ! "<html>\r\n<head><title>301 Moved Permanently</title></head>\r\n<body
+      bgcolor=\"white\">\r\n<center><h1>301 Moved Permanently</h1></center>\r\n<hr><center>nginx/0.7.67</center>\r\n</body>\r\n</html>\r\n"
+    http_version: '1.1'
+- !ruby/struct:VCR::HTTPInteraction
+  request: !ruby/struct:VCR::Request
+    method: :get
+    uri: http://api.yvdev.com:80/2.3/users/view.json?auth_user_id=id&user_id=4163169
+    body: !!null 
+    headers:
+      referer:
+      - https://api.yvdev.com
+  response: !ruby/struct:VCR::Response
+    status: !ruby/struct:VCR::ResponseStatus
+      code: 200
+      message: OK
+    headers:
+      server:
+      - nginx/0.7.67
+      date:
+      - Thu, 20 Oct 2011 13:54:12 GMT
+      content-type:
+      - text/plain; charset=utf-8
+      transfer-encoding:
+      - chunked
+      connection:
+      - keep-alive
+      vary:
+      - Accept-Encoding
+    body: ! '{"response":{"code":200,"data":{"id":"4163169","username":"cukeuser3","user_avatar_url":{"px_24x24":"http:\/\/avatars.youversion.com\/0febb3a634fae08529c07d3c0d143871_24x24.png","px_48x48":"http:\/\/avatars.youversion.com\/0febb3a634fae08529c07d3c0d143871_48x48.png","px_128x128":"http:\/\/avatars.youversion.com\/0febb3a634fae08529c07d3c0d143871_128x128.png","px_512x512":"http:\/\/avatars.youversion.com\/0febb3a634fae08529c07d3c0d143871_512x512.png"},"name":null,"first_name":null,"last_name":null,"location":null,"im_type":null,"im_value":null,"website":null,"language":"false","country":"  ","timezone":"UTC","created":"2011-10-19
+      18:10:14.430167+00","last_login":"2011-10-19 18:11:00+00"},"buildtime":"2011-10-20T13:54:12+00:00"}}'
+    http_version: '1.1'
diff --git a/fixtures/vcr/cuke/cucumber_tags/versions.yml b/fixtures/vcr/cuke/cucumber_tags/versions.yml
index 8aed19d..b5a608d 100644
--- a/fixtures/vcr/cuke/cucumber_tags/versions.yml
+++ b/fixtures/vcr/cuke/cucumber_tags/versions.yml
@@ -687,3 +687,122 @@
       it was morning-Day Six.<\/span>"}],"audio":null},"previous":"","next":{"reference":{"osis":"Gen.2","human":"Genesis
       2"}}},"buildtime":"2011-10-07T17:53:03+00:00"}],"buildtime":"2011-10-07T17:53:03+00:00"}}'
     http_version: '1.1'
+- !ruby/struct:VCR::HTTPInteraction
+  request: !ruby/struct:VCR::Request
+    method: :get
+    uri: https://api.yvdev.com:443/2.3/bible/chapter.json?format=html&reference=gen.1&version=msg
+    body: !!null 
+    headers:
+      referer:
+      - https://api.yvdev.com
+  response: !ruby/struct:VCR::Response
+    status: !ruby/struct:VCR::ResponseStatus
+      code: 301
+      message: Moved Permanently
+    headers:
+      server:
+      - nginx/0.7.67
+      date:
+      - Thu, 20 Oct 2011 13:54:02 GMT
+      content-type:
+      - text/html
+      content-length:
+      - '185'
+      connection:
+      - keep-alive
+      location:
+      - http://api.yvdev.com/2.3/bible/chapter.json?format=html&version=msg&reference=gen.1
+    body: ! "<html>\r\n<head><title>301 Moved Permanently</title></head>\r\n<body
+      bgcolor=\"white\">\r\n<center><h1>301 Moved Permanently</h1></center>\r\n<hr><center>nginx/0.7.67</center>\r\n</body>\r\n</html>\r\n"
+    http_version: '1.1'
+- !ruby/struct:VCR::HTTPInteraction
+  request: !ruby/struct:VCR::Request
+    method: :get
+    uri: http://api.yvdev.com:80/2.3/bible/chapter.json?format=html&reference=gen.1&version=msg
+    body: !!null 
+    headers:
+      referer:
+      - https://api.yvdev.com
+  response: !ruby/struct:VCR::Response
+    status: !ruby/struct:VCR::ResponseStatus
+      code: 200
+      message: OK
+    headers:
+      server:
+      - nginx/0.7.67
+      date:
+      - Thu, 20 Oct 2011 13:54:04 GMT
+      content-type:
+      - text/plain; charset=utf-8
+      transfer-encoding:
+      - chunked
+      connection:
+      - keep-alive
+      vary:
+      - Accept-Encoding
+    body: ! '{"response":{"code":200,"data":[{"code":"200","data":{"copyright":"1993,
+      1994, 1995, 1996, 2000, 2001, 2002 Eugene H. Peterson by NavPress Publishing","request":{"reference":{"osis":"Gen.1","human":"Genesis
+      1"},"content":"<div><h1 class=\"Gen_1\">Genesis 1<\/h1><h2>Heaven and Earth<\/h2><p><span
+      class=\"verse Gen_1_1\"><strong>1<\/strong>\u00a0First this: God created the
+      Heavens and Earth-all you see, all you don''t see.<\/span><span class=\"verse
+      Gen_1_2\"><strong>2<\/strong>\u00a0Earth was a soup of nothingness, a bottomless
+      emptiness, an inky blackness. God''s Spirit brooded like a bird above the watery
+      abyss.<\/span><\/p><p><span class=\"verse Gen_1_3\"><strong>3<\/strong>\u00a0God
+      spoke: \"Light!\" And light appeared.<\/span><span class=\"verse Gen_1_4\"><strong>4<\/strong>\u00a0God
+      saw that light was good and separated light from dark.<\/span><span class=\"verse
+      Gen_1_5\"><strong>5<\/strong>\u00a0God named the light Day, he named the dark
+      Night. It was evening, it was morning-Day One.<\/span><\/p><p><span class=\"verse
+      Gen_1_6\"><strong>6<\/strong>\u00a0God spoke: \"Sky! In the middle of the waters;
+      separate water from water!\"<\/span><span class=\"verse Gen_1_7\"><strong>7<\/strong>\u00a0God
+      made sky. He separated the water under sky from the water above sky. And there
+      it was:<\/span><span class=\"verse Gen_1_8\"><strong>8<\/strong>\u00a0he named
+      sky the Heavens; It was evening, it was morning-Day Two.<\/span><\/p><p><span
+      class=\"verse Gen_1_9\"><strong>9<\/strong>\u00a0God spoke: \"Separate! Water-beneath-Heaven,
+      gather into one place; Land, appear!\" And there it was.<\/span><span class=\"verse
+      Gen_1_10\"><strong>10<\/strong>\u00a0God named the land Earth. He named the
+      pooled water Ocean. God saw that it was good.<\/span><\/p><p><span class=\"verse
+      Gen_1_11\"><strong>11<\/strong>\u00a0God spoke: \"Earth, green up! Grow all
+      varieties of seed-bearing plants, Every sort of fruit-bearing tree.\" And there
+      it was.<\/span><span class=\"verse Gen_1_12\"><strong>12<\/strong>\u00a0Earth
+      produced green seed-bearing plants, all varieties, And fruit-bearing trees of
+      all sorts. God saw that it was good.<\/span><span class=\"verse Gen_1_13\"><strong>13<\/strong>\u00a0It
+      was evening, it was morning-Day Three.<\/span><\/p><p><span class=\"verse Gen_1_14\"><strong>14<\/strong>\u00a0God
+      spoke: \"Lights! Come out! Shine in Heaven''s sky! Separate Day from Night.
+      Mark seasons and days and years,<\/span><span class=\"verse Gen_1_15\"><strong>15<\/strong>\u00a0Lights
+      in Heaven''s sky to give light to Earth.\" And there it was.<\/span><\/p><p><span
+      class=\"verse Gen_1_16\"><strong>16<\/strong>\u00a0God made two big lights,
+      the larger to take charge of Day, The smaller to be in charge of Night; and
+      he made the stars.<\/span><span class=\"verse Gen_1_17\"><strong>17<\/strong>\u00a0God
+      placed them in the heavenly sky to light up Earth<\/span><span class=\"verse
+      Gen_1_18\"><strong>18<\/strong>\u00a0And oversee Day and Night, to separate
+      light and dark. God saw that it was good.<\/span><span class=\"verse Gen_1_19\"><strong>19<\/strong>\u00a0It
+      was evening, it was morning-Day Four.<\/span><\/p><p><span class=\"verse Gen_1_20\"><strong>20<\/strong>\u00a0God
+      spoke: \"Swarm, Ocean, with fish and all sea life! Birds, fly through the sky
+      over Earth!\"<\/span><span class=\"verse Gen_1_21\"><strong>21<\/strong>\u00a0God
+      created the huge whales, all the swarm of life in the waters, And every kind
+      and species of flying birds. God saw that it was good.<\/span><span class=\"verse
+      Gen_1_22\"><strong>22<\/strong>\u00a0God blessed them: \"Prosper! Reproduce!
+      Fill Ocean! Birds, reproduce on Earth!\"<\/span><span class=\"verse Gen_1_23\"><strong>23<\/strong>\u00a0It
+      was evening, it was morning-Day Five.<\/span><\/p><p><span class=\"verse Gen_1_24\"><strong>24<\/strong>\u00a0God
+      spoke: \"Earth, generate life! Every sort and kind: cattle and reptiles and
+      wild animals-all kinds.\" And there it was:<\/span><span class=\"verse Gen_1_25\"><strong>25<\/strong>\u00a0wild
+      animals of every kind, Cattle of all kinds, every sort of reptile and bug. God
+      saw that it was good.<\/span><\/p><p><span class=\"verse Gen_1_26\"><strong>26<\/strong>\u00a0God
+      spoke: \"Let us make human beings in our image, make them reflecting our nature
+      So they can be responsible for the fish in the sea, the birds in the air, the
+      cattle, And, yes, Earth itself, and every animal that moves on the face of Earth.\"<\/span><span
+      class=\"verse Gen_1_27\"><strong>27<\/strong>\u00a0God created human beings;
+      he created them godlike, Reflecting God''s nature. He created them male and
+      female.<\/span><span class=\"verse Gen_1_28\"><strong>28<\/strong>\u00a0God
+      blessed them: \"Prosper! Reproduce! Fill Earth! Take charge! Be responsible
+      for fish in the sea and birds in the air, for every living thing that moves
+      on the face of Earth.\"<\/span><\/p><p><span class=\"verse Gen_1_29\"><strong>29<\/strong>\u00a0Then
+      God said, \"I''ve given you every sort of seed-bearing plant on Earth And every
+      kind of fruit-bearing tree, given them to you for food.<\/span><span class=\"verse
+      Gen_1_30\"><strong>30<\/strong>\u00a0To all animals and all birds, everything
+      that moves and breathes, I give whatever grows out of the ground for food.\"
+      And there it was.<\/span><\/p><p><span class=\"verse Gen_1_31\"><strong>31<\/strong>\u00a0God
+      looked over everything he had made; it was so good, so very good! It was evening,
+      it was morning-Day Six.<\/span><\/p><\/div>\n","audio":null},"previous":"","next":{"reference":{"osis":"Gen.2","human":"Genesis
+      2"}}},"buildtime":"2011-10-20T13:54:04+00:00"}],"buildtime":"2011-10-20T13:54:04+00:00"}}'
+    http_version: '1.1'
diff --git a/lib/yv_api.rb b/lib/yv_api.rb
index a3b4692..d9c102d 100644
--- a/lib/yv_api.rb
+++ b/lib/yv_api.rb
@@ -42,9 +42,8 @@ class YvApi
     # For auth'ed API calls with :user => current_user
     basic_auth opts[:user].username, opts.delete(:user).password if opts[:user]
     path = clean_up(path)
-    response = httparty_post(path, body: opts)
+    response = httparty_post(path, body: opts)    
     return api_response_or_rescue(response, block)
-
   end
 
   private
diff --git a/spec/controllers/notes_controller_spec.rb b/spec/controllers/notes_controller_spec.rb
new file mode 100644
index 0000000..305a4db
--- /dev/null
+++ b/spec/controllers/notes_controller_spec.rb
@@ -0,0 +1,5 @@
+require 'spec_helper'
+
+describe NotesController do
+
+end
diff --git a/spec/helpers/notes_helper_spec.rb b/spec/helpers/notes_helper_spec.rb
new file mode 100644
index 0000000..ed2d0b7
--- /dev/null
+++ b/spec/helpers/notes_helper_spec.rb
@@ -0,0 +1,15 @@
+require 'spec_helper'
+
+# Specs in this file have access to a helper object that includes
+# the NotesHelper. For example:
+#
+# describe NotesHelper do
+#   describe "string concat" do
+#     it "concats two strings with spaces" do
+#       helper.concat_strings("this","that").should == "this that"
+#     end
+#   end
+# end
+describe NotesHelper do
+  pending "add some examples to (or delete) #{__FILE__}"
+end
-- 
1.7.0.4

