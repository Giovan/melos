From 60038b1166a6c37e8f44e600ea8b8d28c65b58d0 Mon Sep 17 00:00:00 2001
From: Chad Bailey <chadbailey@gmail.com>
Date: Wed, 19 Oct 2011 16:40:22 -0500
Subject: [PATCH 03/55] more changes to user

Change-Id: I014c8bb6baceb0925fe210308d201e919d72652b
---
 app/models/user.rb       |    2 +-
 spec/models/user_spec.rb |    6 ++++++
 2 files changed, 7 insertions(+), 1 deletions(-)

diff --git a/app/models/user.rb b/app/models/user.rb
index 48e99e9..41d6d30 100644
--- a/app/models/user.rb
+++ b/app/models/user.rb
@@ -39,7 +39,7 @@ class User
   end
   
   def id
-    
+    @id ||= api_data
   end
   
   def username
diff --git a/spec/models/user_spec.rb b/spec/models/user_spec.rb
index 2e11280..29350b2 100644
--- a/spec/models/user_spec.rb
+++ b/spec/models/user_spec.rb
@@ -51,4 +51,10 @@ describe User do
       User.authenticate("testuser", "asdf").should be_nil
     end
   end
+  
+  describe "id" do
+    it "returns the user's ID for a valid user" do
+      User.authenticate("testuser", "tenders").id.should == 4163157
+    end
+  end
 end
\ No newline at end of file
-- 
1.7.0.4

