From cf5ce8bcc1bba1fd3f0638c64ddef0518ac2b696 Mon Sep 17 00:00:00 2001
From: Caedmon Judd <caedmon@statebuilt.com>
Date: Fri, 21 Oct 2011 13:42:51 -0500
Subject: [PATCH 10/55] Work

---
 app/models/note.rb      |    3 +--
 app/models/reference.rb |    4 ++++
 lib/yv_api.rb           |    1 -
 3 files changed, 5 insertions(+), 3 deletions(-)

diff --git a/app/models/note.rb b/app/models/note.rb
index 0cd5881..618b767 100644
--- a/app/models/note.rb
+++ b/app/models/note.rb
@@ -58,8 +58,7 @@ class Note
   
   def save
     @token = Digest::MD5.hexdigest "#{user.username}.Yv6-#{user.password}"
-    #@reference = reference.to_osis_hash
-debugger    
+
     response = YvApi.post('notes/create', attributes(:title, :content, :language_iso, :reference, :version,
         :published, :user_status, :shared_connections, :token, :user)) do |errors|
       @errors = errors.map { |e| e["error"] }      
diff --git a/app/models/reference.rb b/app/models/reference.rb
index 2e1d5f1..49eca6e 100644
--- a/app/models/reference.rb
+++ b/app/models/reference.rb
@@ -49,6 +49,10 @@ class Reference
     @ref.to_osis_string
   end
 
+  def to_api
+    
+  end
+  
   def human
     case @ref[:verse]
     when Fixnum
diff --git a/lib/yv_api.rb b/lib/yv_api.rb
index 26ce1f3..b109058 100644
--- a/lib/yv_api.rb
+++ b/lib/yv_api.rb
@@ -60,7 +60,6 @@ class YvApi
     # Set the base URL
     base = (protocol + "://" + Cfg.api_root + "/" + Cfg.api_version)
     response = httparty_post(base + path, body: opts)
-File.open('/home/caedmon/Desktop/export.txt', 'w') {|f| f.write(response) }
     return api_response_or_rescue(response, block)
   end
 
-- 
1.7.0.4

